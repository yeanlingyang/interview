!function(e){function t(t){for(var s,a,n=t[0],r=t[1],o=0,u=[];o<n.length;o++)a=n[o],i[a]&&u.push(i[a][0]),i[a]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);for(l&&l(t);u.length;)u.shift()()}var s={},i={2:0};function a(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(e){var t=[],s=i[e];if(0!==s)if(s)t.push(s[2]);else{var n=new Promise(function(t,a){s=i[e]=[t,a]});t.push(s[2]=n);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.src=function(e){return a.p+""+({0:"browserset-select",1:"browserslist.module",3:"datalist.polyfill",5:"retrieve_ga"}[e]||e)+".js"}(e),r=function(t){o.onerror=o.onload=null,clearTimeout(l);var s=i[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src,r=new Error("Loading chunk "+e+" failed.\n("+a+": "+n+")");r.type=a,r.request=n,s[1](r)}i[e]=void 0}};var l=setTimeout(function(){r({type:"timeout",target:o})},12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(t)},a.m=e,a.c=s,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/js/",a.oe=function(e){throw console.error(e),e};var n=window.webpackJsonp=window.webpackJsonp||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var o=0;o<n.length;o++)t(n[o]);var l=r;a(a.s=17)}([function(e,t,s){"use strict";var i=s(2);const a={regexobject:{lists:/^((\s*((\*|\-)|\d(\.|\))) [^\n]+)\n)+/gm,code:/`(.*?)`/g,bolditalic:/(?: ([\*_~]{1,3}))([^\*_~\n]+[^\*_~\s])\1/g,links:/!?\[([^\]<>]+)\]\(([^ \)<>]+)( "[^\(\)\"]+")?\)/g,url:/<([a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?)>/g},parse:function(e,t){var s,i,n,r,o,l,u,c=0,h=0,d=0;for(e="\n"+e+"\n",!0!==t&&(a.regexobject.lists=/^((\s*(\*|\d\.) [^\n]+)\n)+/gm);null!==(u=a.regexobject.lists.exec(e));){for(h=0,l="*"===u[0].trim().substr(0,1)||"-"===u[0].trim().substr(0,1)?"<ul>":"<ol>",r=u[0].split("\n"),o=[],i=0,n=!1,d=0;d<r.length;d++)if(null!==(s=/^((\s*)((\*|\-)|\d(\.|\))) ([^\n]+))/.exec(r[d]))){for(void 0===s[2]||0===s[2].length?c=0:(!1===n&&(n=s[2].replace(/\t/,"    ").length),c=Math.round(s[2].replace(/\t/,"    ").length/n));i>c;)l+=o.pop(),i--,h--;for(;i<c;)"*"===s[0].trim().substr(0,1)||"-"===s[0].trim().substr(0,1)?(l+="<ul>",o.push("</ul>")):(l+="<ol>",o.push("</ol>")),i++,h++;l+="<li>"+s[6]+"</li>\n"}for(;h>0;)l+="</ul>",h--;"*"===u[0].trim().substr(0,1)||"-"===u[0].trim().substr(0,1)?l+="</ul>":l+="</ol>",e=e.replace(u[0],l+"\n")}for(d=0;d<3;d++)for(;null!==(u=a.regexobject.bolditalic.exec(e));)if(l=[],"~~"===u[1])e=e.replace(u[0],"<del>"+u[2]+"</del>");else{switch(u[1].length){case 1:l=[" <i>","</i>"];break;case 2:l=["<b>","</b>"];break;case 3:l=["<i><b>","</b></i>"]}e=e.replace(u[0],l[0]+u[2]+l[1])}for(;null!==(u=a.regexobject.links.exec(e));)e="!"===u[0].substr(0,1)?e.replace(u[0],'<img src="'+u[2]+'" alt="'+u[1]+'" title="'+u[1]+'" />'):e.replace(u[0],"<a "+a.mmdCSSclass(u[2],t)+'href="'+u[2]+'">'+u[1]+"</a>");for(;null!==(u=a.regexobject.url.exec(e));)-1===(l=u[1]).indexOf("://")&&(l="http://"+l),e=e.replace(u[0],"<a "+a.mmdCSSclass(l,t)+'href="'+l+'">'+l.replace(/(https:\/\/|http:\/\/|mailto:|ftp:\/\/)/gim,"")+"</a>");for(;null!==(u=a.regexobject.code.exec(e));)e=e.replace(u[0],"<code>"+u[1]+"</code>");return e=(e=(e=e.replace(/^\n|\n$/g,"")).replace(/[\n]{2,}/gim,"<br/><br/>")).replace(/\n/gim,"<br/>")},htmlEncode:function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),e=t.innerHTML,t=void 0,e},mmdCSSclass:function(e,t){return""}};var n=a;function r(e,t){return(t||document).querySelector(e)}function o(e,t){return(t||document).querySelectorAll(e)}function l(e,t,s,a){var n=e?document.createElement(e):document.createDocumentFragment();if(t)for(var r in t)n.setAttribute(r,t[r]);if(null!=s&&i.a.append(n,s),a)for(var o in a)n.addEventListener(o,a[o],!1);return n}function u(e){var t=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}(e);return n.parse(t)}function c(e,t){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)t.success(s.responseText,s);else{if(!t.error)throw new Error("Failed to XHR: "+e);t.error(s.responseText,s)}},s.open(t.method||"GET",e,!0),"POST"==t.method&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(t.data)}function h(e,t){return t=t||2,+e.toFixed(t)}function d(e,t){if(e.length!==t.length)return!1;for(var s=e.length;s--;)if(e[s]!==t[s])return!1;return!0}function p(e){var t={};return e.replace(new RegExp("([^=&]+)(=([^&]*))?","g"),function(e,s,i,a){t[s]=decodeURIComponent(a)}),t}function f(e,t){for(var s=0,i=0,a=[];s<e.length&&i<t.length;)e[s]<t[i]?s++:e[s]>t[i]?i++:(a.push(e[s]),s++,i++);return a}function b(e,t){if(k.localStorage)try{localStorage.setItem(e,t)}catch(e){}}function g(e){if(k.localStorage)try{return localStorage.getItem(e)||null}catch(e){}return null}function v(e,t,s){var i;return function(){var a=this,n=arguments,r=s&&!i;clearTimeout(i),i=setTimeout(function(){i=null,s||e.apply(a,n)},t),r&&e.apply(a,n)}}function m(e,t,s){if("Android Browser"===e)return 0===s?"Android 5-6.x WebView: Chromium "+t:"Android "+t+" browser";if("iOS Safari"===e)return"Safari & Chrome for iOS "+t;if("Opera Mini"===e)return e;if("Opera Mobile"===e){if(t>13)return"Opera "+t+" for Android"}else{if(e.indexOf(" for Android")>-1)return e.replace(" for Android","")+" "+t+" for Android";if("Safari"===e&&"TP"===t)return"Safari Technology Preview"}return e+" "+t}function w(e){return e.filter(function(e,t,s){return s.indexOf(e)===t})}function y(e){var t=0,s=0,i=null;for(t=e.length-1;t>0;t-=1)s=Math.floor(Math.random()*(t+1)),i=e[t],e[t]=e[s],e[s]=i}function S(e,t){return["text-stroke"].indexOf(t)>-1?"webkit":e}s.d(t,"g",function(){return r}),s.d(t,"h",function(){return o}),s.d(t,"k",function(){return l}),s.d(t,"l",function(){return u}),s.d(t,"a",function(){return c}),s.d(t,"m",function(){return h}),s.d(t,"b",function(){return d}),s.d(t,"j",function(){return p}),s.d(t,"i",function(){return f}),s.d(t,"p",function(){return b}),s.d(t,"n",function(){return g}),s.d(t,"e",function(){return v}),s.d(t,"f",function(){return m}),s.d(t,"q",function(){return w}),s.d(t,"o",function(){return y}),s.d(t,"d",function(){return S}),s.d(t,"c",function(){return k});const k={localStorage:!1};try{k.localStorage="object"==typeof window.localStorage}catch(e){}},function(e,t,s){"use strict";let i={};var a=function(e,t,s){return i.channels[e]||(i.channels[e]=[]),i.channels[e].push({context:s||this,callback:t}),this},n=function(e){if(!i.channels[e])return!1;for(var t=Array.prototype.slice.call(arguments,1),s=0,a=i.channels[e].length;s<a;s++){var n=i.channels[e][s];0,n.callback.apply(n.context,t)}return this};t.a=i={channels:{},publish:n,subscribe:a,installTo:function(e){e.subscribe=a,e.publish=n}}},function(e,t,s){"use strict";const i={hide:function(e){e.classList.add("hidden")},show:function(e){e.classList.remove("hidden")},toggle:function(e,t){e.classList[t?"remove":"add"]("hidden")},toggleClass:function(e,t,s){e.classList[s?"add":"remove"](t)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},remove:function(e){if(Array.isArray(e))for(var t=e,s=0;s<t.length;s++)i.remove(t[s]);else e.parentNode&&e.parentNode.removeChild(e)},append:function(e,t){if("object"==typeof t)for(var s=t.length,i=0;i<s;i++){var a=t[i];"string"==typeof a?e.appendChild(document.createTextNode(a)):e.appendChild(a)}else e.appendChild(document.createTextNode(t))},prepend:function(e,t){e.insertBefore(t,e.firstChild)},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},listen:function(e,t,s,i){i&&(s=s.bind(i)),e.addEventListener(t,s,!1)}};t.a=i},function(e,t,s){"use strict";s.d(t,"c",function(){return r}),s.d(t,"a",function(){return u}),s.d(t,"e",function(){return g}),s.d(t,"d",function(){return v}),s.d(t,"b",function(){return m});var i=s(0),a=s(4),n=s(1);const r={ALL:{value:"all"},NOT_APPLICABLE:{value:"not applicable"}},o=1,l=2,u={URL:1,UI:2};var c=r.ALL,h=r.NOT_APPLICABLE,d=o,p=l,f={LIST:1,STRING:2,BOOLEAN:3,NUMBER:4};function b(e,t,s,o){var l=this;if(this._stringToValue=function(e){var t=null;switch(this.valueType){case f.LIST:t=e.split(",");break;case f.BOOLEAN:t="1"===e;break;case f.NUMBER:t=+e;break;case f.STRING:t=e}var s=this._validate(t);return void 0===s?s:t},this._validate=function(e){var t,s=function(e){var t=a.a.supportDataByFeature;for(var s in t){if(t[s].keywords.split(",").indexOf("#"+e)>-1)return s}return null};switch(this.valueType){case f.LIST:if(this.valuesForAll)for(t=0;t<e.length;t++){var i=e[t];-1===this.valuesForAll.indexOf(i)&&(e.splice(t,1),t--)}else if("feat"===this.id){var n,r=a.a.supportDataByFeature,o=null;for(t=0;t<e.length;t++){var l=e[t];r[l]||((n=s(l))?e[t]=n:(o=l,e.splice(t,1),t--))}if(o&&!e.length)return m.feat.setValueToDefault(),void m.search.setValueFromURL(o);n&&this.setValueFromUI(e)}else if("compare"===this.id){var u=a.a.browsers;for(t=0;t<e.length;t++){var c=e[t].split("+");if(2===c.length){var h=c[0],d=c[1];if(h in u){var p=u[h];d in p.dataByVersion||(e[t]=h+"+"+p.current_version)}else e[t]=null}else e[t]=null}}break;case f.NUMBER:isNaN(e)&&(e=this.defaultValue)}return!0},function(){l.id=e,l.type=t,l.defaultValue=s,l.valueType=o,l.isAll=s==c,l.valuesForAll=null,l._element=null;var a,n=(a=l.id,Object(i.n)("config-"+a));l.value=null!==n?l._stringToValue(n):s}(),"usage_threshold"===e){b.prototype.setValueFromSlider=function(e){e=+e;var t=+function(e){if(e>10)return Math.round(e);for(var t,s=(""+Math.round(100*e)).length,i=Math.pow(10,s)/100,a=[.1,.125,.15,.175,.2,.25,.3,.4,.5,.6,.7,.75,.8,.9,1],n=1/0,r=0;r<a.length;r++){var o=a[r]*i,l=Math.abs(o-e);l<n&&(t=o,n=l)}return t}(50*(Math.pow(e,2.5)/300)).toFixed(2);this.setValue(t,u.UI)},b.prototype.getValueForSlider=function(){var e=this.value/50;return Math.pow(300*e,.4)}}b.prototype._getValueAsString=function(){var e,t=this.value;switch(this.valueType){case f.LIST:e=t.join(",");break;case f.BOOLEAN:e=t?"1":"0";break;case f.NUMBER:e=t+"";break;case f.STRING:e=t}return e},b.prototype.matchesValue=function(e){switch(this.valueType){case f.LIST:return Object(i.b)(this.value,e);default:return this.value==e}},b.prototype.matchesDefault=function(){return this.matchesValue(this.defaultValue)},b.prototype.matchesAll=function(){return this.valueType===f.LIST&&(null!==this.valuesForAll&&void 0!==this.valuesForAll&&Object(i.b)(this.value,this.valuesForAll))},b.prototype.getAsURLParameter=function(){var e=this.id;if(this.value===h||this.type===d||this.matchesDefault())return null;if(this.value==c&&this.matchesAll())return e+"=all";var t=encodeURIComponent(this._getValueAsString());return e+"="+(t=(t=t.replace(/%2C/g,",")).replace(/%2B/g,"+"))},b.prototype.initCheckboxByClass=function(e){var t=e.querySelector("."+this.id);if(!t)throw new Error("No element found with class "+this.id);this.initCheckbox(t)},b.prototype.initCheckbox=function(e){var t=this;e.addEventListener("change",function(){t.setValue(this.checked,u.UI)},!1)},b.prototype.setValuesForAll=function(e){this.valuesForAll=e,this.defaultValue==c&&(this.defaultValue=e),this.value==c&&(this.value=e)},b.prototype.setInitialValue=function(e){this.value=e,n.a.publish("configInitialized",{option:this.id,values:this.value})},b.prototype.setValue=function(e,t){if(!this.matchesValue(e))if(this.value=e,n.a.publish("configChanged",{option:this.id,values:this.value,changeSource:t}),this.type===d){var s=this._getValueAsString();a=this.id,r=s,Object(i.p)("config-"+a,r)}else t!==u.URL&&g();var a,r},b.prototype.setValueFromUI=function(e){this.setValue(e,u.UI)},b.prototype.setValueFromURL=function(e){var t;if(null===e)t=r.NOT_APPLICABLE;else if(e=e.replace(/JS_API/g,"JS API"),void 0===(t=this._stringToValue(e)))return void console.log("invalid value in string: "+e);this.setValue(t,u.URL)},b.prototype.setValueToDefault=function(e){this.value===h?this.value=this.defaultValue:this.setValue(this.defaultValue,u.URL),e||g()},b.prototype.reset=function(){this.value=this.defaultValue},t===d&&(b.prototype.store=function(){i.c.localStorage},b.prototype.restore=function(){i.c.localStorage})}function g(){var e,t=[];for(var s in m){var i=m[s].getAsURLParameter();i&&t.push(i)}e=t.join("&"),n.a.publish("hashChangeRequest",e,{blockEffect:!0})}function v(e){for(var t=0;t<e.length;t++){var s=e[t];m[s].setValueToDefault(!0)}}const m={feat:new b("feat",p,[],f.LIST),search:new b("search",p,"",f.STRING),cats:new b("cats",p,c,f.LIST),statuses:new b("statuses",p,["rec","pr","cr","wd","ls","other"],f.LIST),feature_sort:new b("feature_sort",p,"pubdate",f.STRING),compare:new b("compare",p,[],f.LIST),compare_cats:new b("compare_cats",p,c,f.LIST),primary_browserset:new b("primary_browserset",d,"",f.STRING),include_current:new b("include_current",d,!0,f.BOOLEAN),default_viewmode:new b("default_viewmode",d,"view-mode-normal",f.STRING),default_showmode:new b("default_showmode",d,"",f.STRING),agents:new b("agents",d,["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","and_uc","samsung"],f.LIST),force_include_mobile:new b("force_include_mobile",d,!0,f.BOOLEAN),use_imported_data:new b("use_imported_data",d,!0,f.BOOLEAN),usage_threshold:new b("usage_threshold",d,.5,f.NUMBER),primary_usage:new b("primary_usage",d,"region.global",f.STRING),show_conclusions:new b("show_conclusions",d,!1,f.BOOLEAN),accessible_colors:new b("accessible_colors",d,!1,f.BOOLEAN),show_full_prefix:new b("show_full_prefix",d,!1,f.BOOLEAN)};var w;n.a.subscribe("pageSectionDisplayed",function(e){}),""===m.default_showmode.value&&(w=m.primary_browserset.matchesDefault()?"1":"0",m.default_showmode.setValue(w))},function(e,t,s){"use strict";var i=s(0),a=s(1),n=s(10),r=s(6),o=s.n(r),l=s(3),u=o.a.subclass({constructor:function(){this.browserListModel=null,this.usageByType={region:{global:null},custom:null},this.dataById={}},init:function(e){this.browserListModel=e,this.getSettingsFromConfig()},getSettingsFromConfig:function(){this.set("usageThreshold",l.b.usage_threshold.value),this.set("primaryUsage",l.b.primary_usage.value)},add:function(e){var t=e.type,s=e.uid,i=(e.name,e.dataByBrowser);"op_mini"in i&&"5.0-8.0"in i.op_mini&&(i.op_mini[0]=i.op_mini["5.0-8.0"],delete i.op_mini["5.0-8.0"]),this.usageByType[t]||(this.usageByType[t]={}),this.usageByType[t][s]=i,this.dataById[s]=e,e.unknownPerc=this.getUnknownPerc(e),this.emit("usageAdded",e)},getTotalForBrowserSet:function(e,t){var s=this.getUsageById(e),i=0;return this.browserListModel.eachBrowser(function(e){if(e.browserSetState[t])for(var a=s.dataByBrowser[e.id],n=0;n<e.versionArray.length;n++){var r=e.versionArray[n];r.browserSetState[t]&&(i+=a[r.id])}}),i},getTotalForBrowserType:function(e,t){var s=this.getUsageById(e),i=0;return this.browserListModel.eachOfType(t,function(e){var t=s.dataByBrowser[e.id];for(var a in t)i+=t[a]}),i},getUnknownPerc:function(e){var t=0;for(var s in e.dataByBrowser){var i=e.dataByBrowser[s];for(var a in i)t+=i[a]}return 100-t},remove:function(e){var t=this.dataById[e];delete this.dataById[e],this.emit("usageRemoved",t)},getUsageById:function(e){return this.dataById[e]}}),c=o.a.subclass({constructor:function(e,t){this.id=t.version,this.browserModel=e,this.era=t.era,this.versionNumber=t.version,this.shortVersion=this.getShortVersion(),this.prefix=t.prefix,this.releaseDate=t.release_date?new Date(1e3*t.release_date):null,this.usageDataById={},this.browserSetState={},this.addFoundUsage(),F.on("change:usageThreshold",this.filterByUsage,this),F.on("change:primaryUsage",this.filterByUsage,this),this.filterByUsage()},getName:function(){return Object(i.f)(this.browserModel.name,this.versionNumber,this.era)},getPrettyReleaseDate:function(){if(!this.releaseDate)return"";var e=this.releaseDate.toString().split(" ");return e[1]+" "+ +e[2]+", "+e[3]},addFoundUsage:function(){F.on("usageAdded",this.addUsage,this);var e=F.dataById;for(var t in e){var s=e[t];this.addUsage(s)}},testBrowserSet:function(e){var t=this.browserModel.id+" "+this.versionNumber,s=e.arr.indexOf(t)>-1;return this.browserSetState[e.name]=s,s},filterByBrowserSet:function(e){this.set("isShown",this.browserSetState[e])},addUsage:function(e){var t,s=e.dataByBrowser[this.browserModel.id];t=s?!(this.id in s)&&"0"in s?s[0]||0:s[this.id]||0:0,this.usageDataById[e.uid]={name:e.name,percentage:Object(i.m)(t,2)},this.emit("usageDataChange")},getShortVersion:function(e){if(this.versionNumber.indexOf("-")>-1){var t=e?0:1;return this.versionNumber.split("-")[t].replace(/\.0$/,"")}return this.versionNumber},filterByUsage:function(){var e=F.get("primaryUsage"),t=F.get("usageThreshold"),s=F.getUsageById(e);s||(l.b.primary_usage.setValueToDefault(),e=l.b.primary_usage.value,s=F.getUsageById(e));var i=s.dataByBrowser[this.browserModel.id],a=0;i&&this.id in i&&(a=i[this.id]),this.primaryUsage=a;var n=a>t;this.set("isShown",n)},getMissingUsage:function(){return this.get("isShown")||this.era>=0?0:this.primaryUsage}}),h=o.a.subclass({constructor:function(e,t){this.browserListModel=t,this.id=e.id,this.name=e.browser,this.abbr=e.abbr,this.type=e.type,this.shortName=this._makeShortName(),this.currentVersion=e.current_version,this.versionArray=[],this.versionsById={},this.browserSetState={},this.makeVersionArray(e.version_list),this.set("isShown",!1),this.on("browserSetChange",this.filterByBrowserSet.bind(this))},_makeShortName:function(){return this.name.replace(/ for| Browser/,"")},makeVersionArray:function(e){for(var t,s=0;s<e.length;s++){var i=e[s];t=new c(this,i),this.versionArray.push(t),this.versionsById[t.id]=t}this.lastEra=t.era},readBrowserSet:function(e){for(var t=!1,s=0;s<this.versionArray.length;s++){this.versionArray[s].testBrowserSet(e)&&(t=!0)}this.browserSetState[e.name]=t},filterByBrowserSet:function(e){if(e){if(!(e.name in this.browserSetState))throw Error("Browserset not yet read");var t=this.browserSetState[e.name];if(this.set("isShown",t),t)for(s=0;s<this.versionArray.length;s++){this.versionArray[s].filterByBrowserSet(e.name)}}else for(var s=0;s<this.versionArray.length;s++){this.versionArray[s].filterByUsage()}},getMissingUsage:function(){for(var e=0,t=0;t<this.versionArray.length;t++){e+=this.versionArray[t].getMissingUsage()}return e}}),d=o.a.subclass({constructor:function(){this.browsersById={}},init:function(e,t){for(var s in this.on("change:shownBrowsers",this.updateBrowserModels),e){var i=e[s];i.id=s,this.browsersById[s]=new h(i,this)}this.updateShownFromConfig(),this.set("primaryBrowserset",l.b.primary_browserset.value),t.on("change:usageThreshold",this.handleUsageChange,this),t.on("change:primaryUsage",this.handleUsageChange,this)},updateShownFromConfig:function(){var e=l.b.agents.value;this.set("shownBrowsers",e),this.get("shownBrowsers")===e?this.updateBrowserModels(e):this.set("shownBrowsers",e)},eachBrowser:function(e){for(var t in this.browsersById){e(this.browsersById[t])}},eachOfType:function(e,t){for(var s in this.browsersById){var i=this.browsersById[s];i.type===e&&t(i,e)}},readBrowserSet:function(e){for(var t in this.browsersById){this.browsersById[t].readBrowserSet(e)}},filterByBrowserSet:function(e){for(var t in this.browsersById){this.browsersById[t].emit("browserSetChange",e)}e||this.updateShownFromConfig(),this.emit("shownChange","browserSetChange")},updateBrowserModels:function(e){for(var t in this.browsersById){var s=e.indexOf(t)>-1;this.browsersById[t].set("isShown",s)}this.emit("shownChange","shownBrowserChange")},handleUsageChange:function(){this.getMissingUsage(),this.emit("shownChange","usageChange")},getMissingUsage:function(){var e=0;for(var t in this.browsersById){e+=this.browsersById[t].getMissingUsage()}a.a.publish("missingUsageUpdate",e)}}),p=s(5),f=function(e,t){var s={id:e,all:{y:0,a:0},unprefixed:{y:0,a:0},name:t};if(0===e.indexOf("region.")){var i=e.split(".")[1];s.shortName=p.e[i]}return s};function b(e,t){this.amount=t,this.letter=e}var g={UNKNOWN:new b("u",0),NOT_SUPPORTED:new b("n",0),PARTIALLY_SUPPORTED:new b("a",.5),SUPPORTED:new b("y",1)},v=o.a.subclass({constructor:function(e){this.featureModel=e,this.maxId="all",this.update(),F.on("usageAdded",this.addUsage,this),F.on("usageRemoved",this.removeUsage,this)},setMax:function(e){this.maxId=e,this.update()},update:function(){this.usageSetsById={},this.addFoundUsage()},addFoundUsage:function(){var e=F.dataById;for(var t in e){var s=e[t];this.addUsage(s)}},addUsage:function(e){var t=new f(e.uid,e.name);this.usageSetsById[e.uid]=t;var s,i,a=e.dataByBrowser,n=e.uid,r=(e.name,this.featureModel.supportDataByBrowser),o=(this.maxId,100);switch(this.maxId){case"tracked":o=F.getTotalForBrowserType(n,"desktop")+F.getTotalForBrowserType(n,"mobile");break;case"tracked|desktop":s="desktop";break;case"tracked|mobile":s="mobile";break;default:0===this.maxId.indexOf("browserset|")&&(i=this.maxId.substr("browserset|".length),o=F.getTotalForBrowserSet(n,i))}for(var l in s&&(o=F.getTotalForBrowserType(n,s)),r){var u=r[l],c=x.browsers[l];if(!s||s===c.type){if(i){var h=N.browsersById[l];if(!h.browserSetState[i])continue}var d=c.current_version;for(var p in u){if(i)if(!h.versionsById[p].browserSetState[i])continue;var b=u[p].supportValue;switch(b.supportLevel){case g.PARTIALLY_SUPPORTED:case g.SUPPORTED:var v=a[l];if(!v)continue;var m=0;if(p in v?m=v[p]:"0"in v&&p==d&&(m=v[0]),!(m=m/o*100))continue;var w=b.supportLevel.letter;t.all[w]+=m,b.isPrefixed||(t.unprefixed[w]+=m)}}}}this.emit("featureUsageAdded",t)},removeUsage:function(e){var t=this.usageSetsById[e.uid];delete this.usageSetsById[e.uid],this.emit("featureUsageRemoved",t)}}),m=o.a.subclass({constructor:function(e,t){this.id=e.id,this.title=e.title,this.featureListModel=t,this.sourceData=e,this.hasPrefixes=!1,this.prefixType=null,this.featureUsageModel=null,this.supportScore=0,this.versionsByNoteNumber={},this.versionFeatureArr=[],this.supportDataByBrowser=null;var s=l.b.default_viewmode.value||p.b.NORMAL;this.set("viewMode",s)},initFullData:function(e){e.id=this.id,e.title=this.title,e.pubDate=this.sourceData.pubDate,this.sourceData=e,this.makeSupportDataByBrowser(),this.makeFeatureUsageModel(),this.prefixType=this.getPrefixType(),this.emit("loaded")},isLoaded:function(){return!!this.supportDataByBrowser},makeFeatureUsageModel:function(){this.featureUsageModel=new v(this)},getPrefixType:function(){if(!this.hasPrefixes)return null;var e=this.sourceData;return e.baseCategories.indexOf("CSS")>-1?"css":e.ucprefix?"js-upper":"js-lower"},makeSupportDataByBrowser:function(){var e=this.sourceData.stats,t={};for(var s in e){var i=e[s],a=this.processRawVersions(i,s);t[s]=a}this.supportDataByBrowser=t},processRawVersions:function(e,t){var s={},i=this.versionFeatureArr;for(var a in e){var n=e[a],r=D(n=n.replace("p","n"));this.supportScore+=r.supportLevel.amount,r.noteNumbers.length&&this.updateNoteData(r.noteNumbers,t,a),r.isPrefixed&&(this.hasPrefixes=!0);var o={supportValue:r,usageData:{"region.global":0}};s[a]=o,i.push(o)}return s},updateNoteData:function(e,t,s){for(var i=this.versionsByNoteNumber,a=0;a<e.length;a++){var n=e[a],r=[t,s];i[n]?i[n].push(r):i[n]=[r]}},selectNote:function(e){this.emit("noteSelected",e)},unSelectNote:function(e){this.emit("noteUnSelected",e)},selectVersion:function(e){this.isSelected=!0,this.emit("versionSelected",e)},unSelectVersion:function(e){this.isSelected=!1,this.emit("versionUnSelected",e)},testValue:function(e,t){var s=null,a=this.sourceData;switch(e){case"search":var n=t,r=a.searchableContent,o=n.toLowerCase().replace(/^(-?(o|ms|moz|webkit)+-)/,"").replace(/:\s+/g,":").replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");s=null!==new RegExp("^"+o+"|[^a-zA-Z]"+o).exec(r);break;case"cats":var l=a.baseCategories;s=!!Object(i.i)(l,t).length;break;case"statuses":var u=a.status;s=t.indexOf(u)>-1;break;default:throw new Error("Unexpected test value: "+e)}return s},display:function(){this.set("isDisplayed",!0)}}),w=s(9),y=o.a.subclass({constructor:function(){this.filtered=!1,this.featuresById=null,this.ecmaResults=[],this.commonSearchResults=[]},init:function(e,t){var s=e.features;this.ecmaFeatures=e.ecmaFeatures,this.commonSearchFeatures=e.commonSearchFeatures,this.browserListModel=t,this.getSettingsFromConfig(),this.makeFeatures(s),this.on("change",this.applyFilterFromChange)},applyFilterFromChange:function(e){var t=this.get(e);switch(e){case"search":this.filterBySearch(t);break;case"searchResults":this.handleSearchResults(t);break;case"filterResults":this.handleFilterResults(t);break;case"feat":this.filterByFeatures(t);break;case"cats":case"statuses":this.filterByOthers()}this.filtered=!0},initialDisplay:function(){this.filtered||this.emit("listChanged"),this.get("currentFilter")||this.applyCurrentFilters()},updateBrowsers:function(e){this.browserListModel.set("shownBrowsers",e)},makeFeatures:function(e){var t={};for(var s in e){var i=e[s];i.id=s;var a=new m(i,this);t[s]=a}this.featuresById=t},loadFeatureData:function(e){this.featuresById[e.id].initFullData(e)},getSettingsFromConfig:function(){l.b.feat.value;this.set("feat",s);var e=l.b.search.value;this.set("search",e);var t=l.b.cats.value;this.set("cats",t);var s=l.b.statuses.value;this.set("statuses",s)},searchFeatures:function(e){e.length;var t=!e,s=this.featuresById;for(var i in s){var a,n=s[i];t?a=!0:(a=n.testValue("search",e))&&this.foundCount++,n.set("isShown",a)}},searchEcmaFeatures:function(e){var t=e.length;for(var s in this.ecmaResults=[],this.ecmaFeatures)for(var i=this.ecmaFeatures[s],a=i.url,n=i.ids,r=0;r<n.length;r++){var o=n[r].toLowerCase();if(t>=3&&o.indexOf(e)>-1){this.foundCount++;var l=n[r],u=l.replace(/ /g,"_").replace(/"|:/g,"");this.ecmaResults.push({url:a+"#test-"+u,feature:l,version:s})}}},searchCommonSearchFeatures:function(e){this.commonSearchResults=[];for(var t=this.commonSearchFeatures,s=0;s<t.length;s++){var i=t[s];if(i.searchableContent.indexOf(e)>-1)this.foundCount++,this.commonSearchResults.push(i);else if(i.list&&"css-property"===i.type)for(var a=0;a<i.list.length;a++){var n=i.list[a];-1!==n.indexOf("(")&&(n=n.replace(/ /g,"").replace("(",": ?("),new RegExp(n).test(e)&&(this.foundCount++,this.commonSearchResults.push(i)))}}},filterBySearch:function(e){e.length?this.set("currentFilter","search"):(this.set("currentFilter",null),this.set("searchResults",[],!0),this.ecmaFeatures=[],this.commonSearchResults=[],this.filterByOthers())},handleSearchResults:function(e){if("search"===this.get("currentFilter")){this.get("search").length;var t=this.featuresById;for(var s in this.foundCount=e.length,t){var i=e.indexOf(s)>-1;t[s].set("isShown",i)}var n=(this.get("search")||"").toLowerCase();this.searchEcmaFeatures(n),this.searchCommonSearchFeatures(n),this.emit("listChanged"),a.a.publish("listFilteredBySearch",{amount:this.foundCount})}else console.warn("Not filtering by search")},handleFilterResults:function(e){if("other"===this.get("currentFilter")){var t=this.featuresById;this.foundCount=e.length,e.forEach(function(e){t[e].set("isShown",!0)}),this.emit("listChanged")}else console.warn("Not filtering by other")},filterByFeatures:function(e){var t=!e.length;if(!t||"search"!==this.get("currentFilter")){this.set("currentFilter","feat");var s=this.featuresById;for(var i in s){var a,n=s[i];a=!!t||e.indexOf(i)>-1,n.set("isShown",a)}this.emit("listChanged")}},filterByOthers:function(){this.set("currentFilter","other");var e=this.get("cats"),t=this.get("statuses"),s=this.featuresById;for(var i in s){var a=s[i],n=a.testValue("cats",e),r=a.testValue("statuses",t),o=n&&r;a.set("isShown",o)}this.emit("listChanged")},applyCurrentFilters:function(){this.featuresById;var e=this.get("search"),t=this.get("feat");e&&e.length?this.filterBySearch(e):t&&t.length?this.filterByFeatures(t):"tables"===w.a.currentSection&&this.filterByOthers(),this.set("displayedFeatures",[])},sort:function(){}}),S=o.a.subclass({constructor:function(){this.dataByBrowser={},this.shownCount=0},init:function(){R.on("listChanged",this.updateData,this),a.a.subscribe("allFeatureDataLoaded",function(e){this.updateData()}.bind(this))},updateData:function(){var e=this.dataByBrowser={},t=N.browsersById,s=R.featuresById;for(var i in this.shownCount=0,s){var a=s[i];if(a.get("isShown")&&a.supportDataByBrowser){this.shownCount++;var n=a.supportDataByBrowser;for(var r in t){var o=t[r].versionArray;e[r]||(e[r]={});for(var l=0;l<o.length;l++){var u=o[l].id;a.supportDataByBrowser[r][u];if(e[r][u]||(e[r][u]=0),n[r]&&n[r][u]){var c=n[r][u].supportValue.supportLevel.amount;e[r][u]+=c}}}}}this.shownCount>0&&this.emit("summaryChanged")}}),k=s(11);function C(e){this.valueString=e,this.supportLevel=null,this.isPrefixed=!1,this.hasPolyfill=!1,this.isDisabled=!1,this.supportClasses="",this.noteNumbers=[],e.indexOf("#")>-1?this.supportClasses=e.replace(/\#\d+ ?/g,""):this.supportClasses=e;for(var t=e.split(" "),s=0;s<t.length;s++){var i=t[s];switch(i){case"y":this.supportLevel=g.SUPPORTED;break;case"a":this.supportLevel=g.PARTIALLY_SUPPORTED;break;case"u":this.supportLevel=g.UNKNOWN;break;case"p":this.hasPolyfill=!0,this.supportLevel=g.NOT_SUPPORTED;break;case"n":this.supportLevel=g.NOT_SUPPORTED;break;case"x":this.isPrefixed=!0;break;case"d":this.isDisabled=!0;break;default:var a=/^#(\d+)$/.exec(i);if(a&&a.length>=2){var n=a[1];this.noteNumbers.push(n)}}}this.text=p.g[this.supportLevel.letter],this.hasFullSupport=this.supportLevel===g.SUPPORTED,this.hasPartialSupport=this.supportLevel===g.PARTIALLY_SUPPORTED}s.d(t,"a",function(){return x}),s.d(t,"e",function(){return D}),s.d(t,"g",function(){return F}),s.d(t,"b",function(){return N}),s.d(t,"d",function(){return R}),s.d(t,"f",function(){return U});var O,_,j,B,L,V={};const x={supportDataByFeature:{},regionNameById:null,regionIdByName:null};var I=window.Caniuse;var T=function(e){e.statusLabel=j[e.status]},M=function(e){O=function(){for(var e={},t=Object(i.h)('[id^="cat_"]'),s=0;s<t.length;s++)for(var a,n=t[s].getElementsByTagName("a"),r=0;r<n.length;r++){var o=n[r],l=o.textContent;if(0===r)a=l;else{var u=o.getAttribute("href"),c=[a],h=o.dataset;if(!h.status)continue;h.cats&&(c=c.concat(h.cats.split(","))),e[u]={title:l,baseCategories:c,status:h.status,pubDate:new Date(h.pubdate)}}}return e}(),_=e.agents,B=e.cats,j=e.statuses,x.lastRegionDate=e.last_region_date;var t,s={};for(var r in _){var o=_[r];s[r]||(s[r]={});var l=o.version_list;for(t=0;t<l.length;t++){var u=l[t];u.prefix||(u.prefix=o.prefix);var c=u.version,h=u.global_usage;s[r][c]=h}}x.supportDataByFeature=O,x.browsers=_,function(){for(var e in L={},_){var t=_[e],s=t.type,i=t.dataByVersion={},a=t.version_list,n=L[s]||{};L[s]=n,n[e]=t;for(var r=0;r<a.length;r++){var o=a[r];i[o.version]=o}}}();var d=new n.a({name:"Global",id:"global",type:"region",source:"statcounter",dataByBrowser:s,meta:""}),p=e.ecmascript,f=e.common_searches;for(t=0;t<f.length;t++){var b=f[t];b.searchableContent=[b.title,b.keywords].join(" ").toLowerCase(),b.list&&(b.type.indexOf("html-element")>-1?b.searchableContent+="<"+b.list.join(">,<")+">":b.searchableContent+=" "+b.list.join(" ").toLowerCase())}var g={features:O,browsers:_,browsersByType:L,categories:B,statuses:j,globalUsage:d,ecmaFeatures:p,commonSearchFeatures:f};a.a.publish("supportDataReady",g),a.a.publish("baseDataReady",g)};function A(e){e.forEach(function(e){V[e]||(V[e]="needed")}),setTimeout(function(){var e=[];for(var t in V){"needed"===V[t]&&(V[t]="loading",e.push(t))}e.length&&Object(i.a)("/process/get_feat_data.php?type=support-data&feat="+e.join(","),{success:function(s){JSON.parse(s).forEach(function(s,i){s.id=e[i],T(s),V[t]="loaded",a.a.publish("featureDataLoaded",s)}),a.a.publish("allFeatureDataLoaded")},error:function(){}})},0)}var E={};function D(e){var t=E[e];return t||(t=new C(e),E[e]=t),t}t.c={init:function(){if(!I.rawData)throw new Error("No raw data found");M(I.rawData),k.a.setMode(k.a.ALL)}};const F=new u,N=new d,R=new y,U=new S;a.a.subscribe("configChanged",function(e){"feat"===e.option&&A(e.values)}),a.a.subscribe("featureDataNeeded",function(e){A([e])})},function(e,t,s){"use strict";s.d(t,"d",function(){return i}),s.d(t,"a",function(){return a}),s.d(t,"f",function(){return n}),s.d(t,"g",function(){return r}),s.d(t,"e",function(){return o}),s.d(t,"c",function(){return l}),s.d(t,"b",function(){return u});const i={home:!0,index:!0,comparison:!0,stats_import:!0,browserset_select:!0,info_news:!0,info_about:!0,tables:!0},a={TABLES:"tables"},n={pubdate:"Publication date",score:"Most supported first",rscore:"Least support first",alpha:"Alphabetical",ralpha:"Reverse Alphabetical"},r={y:"✓ Supported",n:"✗ Not supported",d:"✗ Not supported by default, but can be enabled",u:"? Support unknown",a:"~ Partial support",p:"✗ Not supported, but has polyfill available"},o={CD:"Congo (DRC)",CG:"Congo (Republic)",FK:"Falkland Islands",GB:"U.K.",US:"U.S.A.",VA:"Vatican City",VC:"St. Vincent"},l={edge:"Version number used for Edge is based on the number of EdgeHTML rather than Edge itself. This is because EdgeHTML is the engine for Edge that is related to feature support change.",ios_saf:"The Safari browser for iOS is tied to the operating system, so the numbers used are based on the OS version.",android:"Android browser/WebView version numbers through 4.4 refer to the version of Android OS. Support listed is for the Android core; it should be noted that many hardware vendors (Samsung, HTC, etc.) use altered version of their default browser which may include [more/less/buggy support](http://slides.com/html5test/the-android-browser#/).\n\nStarting in Android 5, the web engine can be updated separately, so the latest Chromium version number is used instead.",op_mini:'Opera Mini is primarily used on feature phones with processing done based on Opera 12.1 via Opera servers. To test on iOS/Android this mode can be enabled using "Extreme data savings"',op_mob:'On Android, Opera Mobile is currently known as "Opera Classic" for version 12.1 and simply "Opera" for later versions.'},u={NORMAL:"view-mode-normal",USAGE_RELATIVE:"view-mode-usage_relative",DATE_RELATIVE:"view-mode-date_relative"}},function(e,t,s){
/*! Stapes.js v0.7.1 < http://hay.github.com/stapes > */
!function(){"use strict";var s=1;if(!Object.create)var i=function(){};var a=Array.prototype.slice,n={attributes:{},eventHandlers:{"-1":{}},guid:-1,addEvent:function(e){n.eventHandlers[e.guid][e.type]||(n.eventHandlers[e.guid][e.type]=[]),n.eventHandlers[e.guid][e.type].push({guid:e.guid,handler:e.handler,scope:e.scope,type:e.type})},addEventHandler:function(e,t,s){var i,a={};for(var r in"string"==typeof e?(i=s||!1,a[e]=t):(i=t||!1,a=e),a)for(var o=a[r],l=r.split(" "),u=0,c=l.length;u<c;u++){var h=l[u];n.addEvent.call(this,{guid:this._guid||this._.guid,handler:o,scope:i,type:h})}},addGuid:function(e,t){e._guid&&!t||(e._guid=s++,n.attributes[e._guid]={},n.eventHandlers[e._guid]={})},attr:function(e){return n.attributes[e]},clone:function(e){return n.extend({},e)},create:function(e){return Object.create?Object.create(e):(i.prototype=e,new i)},createSubclass:function(e,t){function s(){if(!(this instanceof s))throw new Error("Please use 'new' when initializing Stapes classes");this.on&&n.addGuid(this,!0),a.apply(this,arguments)}t=t||!1;var i=(e=e||{}).superclass.prototype,a=e.hasOwnProperty("constructor")?e.constructor:function(){};for(var o in t&&n.extend(i,r),s.prototype=n.create(i),s.prototype.constructor=s,n.extend(s,{extend:function(){return n.extendThis.apply(this,arguments)},parent:i,proto:function(){return n.extendThis.apply(this.prototype,arguments)},subclass:function(e){return(e=e||{}).superclass=this,n.createSubclass(e)}}),e)"constructor"!==o&&"superclass"!==o&&(s.prototype[o]=e[o]);return s},emitEvents:function(e,t,s,i){s=s||!1,i=i||this._guid;for(var r=a.call(n.eventHandlers[i][e]),o=0,l=r.length;o<l;o++){var u=n.extend({},r[o]),c=u.scope?u.scope:this;s&&(u.type=s),u.scope=c,u.handler.call(u.scope,t,u)}},extend:function(){for(var e=a.call(arguments),t=e.shift(),s=0,i=e.length;s<i;s++){var n=e[s];for(var r in n)t[r]=n[r]}return t},extendThis:function(){var e=a.call(arguments);return e.unshift(this),n.extend.apply(this,e)},makeUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},removeAttribute:function(e,t){t=t||!1;for(var s=n.trim(e).split(" "),i=0,a=s.length;i<a;i++){var r=n.trim(s[i]);r&&(delete n.attr(this._guid)[r],t||(this.emit("change",r),this.emit("change:"+r),this.emit("remove",r),this.emit("remove:"+r)))}},removeEventHandler:function(e,t){var s=n.eventHandlers[this._guid];if(e&&t){if(!(s=s[e]))return;for(var i,a=0,r=s.length;a<r;a++)(i=s[a].handler)&&i===t&&(s.splice(a--,1),r--)}else e?delete s[e]:n.eventHandlers[this._guid]={}},setAttribute:function(e,t,s){s=s||!1;var i=this.has(e),a=n.attr(this._guid)[e];if(t!==a){if(n.attr(this._guid)[e]=t,s)return;this.emit("change",e),this.emit("change:"+e,t);var r={key:e,newValue:t,oldValue:a||null};this.emit("mutate",r),this.emit("mutate:"+e,r);var o=i?"update":"create";this.emit(o,e),this.emit(o+":"+e,t)}},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},typeOf:function(e){return null==e?String(e):Object.prototype.toString.call(e).replace(/\[object |\]/g,"").toLowerCase()},updateAttribute:function(e,t,s){var i=this.get(e);"object"===n.typeOf(i)&&(i=n.clone(i));var a=t.call(this,i,e);n.setAttribute.call(this,e,a,s||!1)}},r={emit:function(e,t){t=void 0===t?null:t;for(var s=e.split(" "),i=0,a=s.length;i<a;i++){var r=s[i];n.eventHandlers[-1].all&&n.emitEvents.call(this,"all",t,r,-1),n.eventHandlers[-1][r]&&n.emitEvents.call(this,r,t,r,-1),"number"==typeof this._guid&&(n.eventHandlers[this._guid].all&&n.emitEvents.call(this,"all",t,r),n.eventHandlers[this._guid][r]&&n.emitEvents.call(this,r,t))}},off:function(){n.removeEventHandler.apply(this,arguments)},on:function(){n.addEventHandler.apply(this,arguments)}};n.Module=function(){},n.Module.prototype={create:function(){throw new Error("".concat("create() on Stapes modules no longer works from 0.8.0. ","Check the docs."))},each:function(e,t){var s=n.attr(this._guid);for(var i in s){var a=s[i];e.call(t||this,a,i)}},extend:function(){return n.extendThis.apply(this,arguments)},filter:function(e){var t=[],s=n.attr(this._guid);for(var i in s)e.call(this,s[i],i)&&t.push(s[i]);return t},get:function(e){if("string"==typeof e)return this.has(e)?n.attr(this._guid)[e]:null;if("function"==typeof e){var t=this.filter(e);return t.length?t[0]:null}},getAll:function(){return n.clone(n.attr(this._guid))},getAllAsArray:function(){var e=[],t=n.attr(this._guid);for(var s in t){var i=t[s];"object"===n.typeOf(i)&&!i.id&&(i.id=s),e.push(i)}return e},has:function(e){return void 0!==n.attr(this._guid)[e]},map:function(e,t){var s=[];return this.each(function(i,a){s.push(e.call(t||this,i,a))},t||this),s},push:function(e,t){if("array"===n.typeOf(e))for(var s=0,i=e.length;s<i;s++)n.setAttribute.call(this,n.makeUuid(),e[s]);else n.setAttribute.call(this,n.makeUuid(),e,t||!1);return this},remove:function(e,t){return"function"==typeof e?this.each(function(s,i){e(s)&&n.removeAttribute.call(this,i,t)}):n.removeAttribute.call(this,e,t||!1),this},set:function(e,t,s){if("object"==typeof e)for(var i in e)n.setAttribute.call(this,i,e[i]);else n.setAttribute.call(this,e,t,s||!1);return this},size:function(){var e=0,t=n.attr(this._guid);for(var s in t)e++;return e},update:function(e,t,s){return"string"==typeof e?n.updateAttribute.call(this,e,t,s||!1):"function"==typeof e&&this.each(function(t,s){n.updateAttribute.call(this,s,e)}),this}};var o={_:n,create:function(){var e=n.create(n.Module.prototype);return n.addGuid(e,!0),o.mixinEvents(e),e},extend:function(){return n.extendThis.apply(n.Module.prototype,arguments)},mixinEvents:function(e){return e=e||{},n.addGuid(e),n.extend(e,r)},on:function(){n.addEventHandler.apply(this,arguments)},subclass:function(e,t){return t=t||!1,(e=e||{}).superclass=t?function(){}:n.Module,n.createSubclass(e,!t)},version:"0.7.1"};e.exports&&(t=e.exports=o),t.Stapes=o}()},function(e,t,s){"use strict";s.d(t,"c",function(){return i}),s.d(t,"b",function(){return f}),s.d(t,"d",function(){return b});var i,a=s(0),n=s(2),r=s(5),o=s(4),l=s(1),u=s(3),c=s(10),h="suggestCountry",d="usage-data-by-id",p={};function f(e,t){var s=!1;for(var a in i){var n=i[a];n.type===e&&n.id===t&&(s=!0)}return s}const b=function(e){var t=e.regionId,s=!!e.updateOnly,n="region."+t;if(n in i){var r=i[n];return l.a.publish("usageDataReceived",{usageData:r,updateOnly:s,initialRequest:!1}),Promise.resolve(r)}return p[n]?p[n]:(p[n]=new Promise(function(e,i){Object(a.a)("/process/request_region_data.php?id="+t,{success:function(a){var n;try{n=JSON.parse(a)}catch(e){n=null}if(!n)return i("usageDataRequestFailed: "+t),void l.a.publish("usageDataRequestFailed",t);n.name=n.name,n.type="region",n.source="statcounter",n.dataByBrowser=n.data,n.meta={access_date:n.access_date,month:n.month};var r=new c.a(n),o={usageData:r,updateOnly:s,initialRequest:!0};e(r),l.a.publish("usageDataReceived",o)},error:function(){i("usageDataRequestFailed: "+t),l.a.publish("usageDataRequestFailed",t)}})}),p[n])};function g(e,t){var s=e[t];if("statcounter"==s.source){s.meta.month;var i=o.a.lastRegionDate;if(i!=s.meta.access_date)return console.log("Requesting new usage due to date change:",i,s.meta.access_date),delete e[t],Object(a.p)(d,JSON.stringify(e)),l.a.subscribe("regionOptionSetReady",function(e){l.a.publish("requestUsageUpdate",t)}),!1}return!0}l.a.subscribe("requestRegionData",b),l.a.subscribe("usageDataReceived",function(e){var t=e.usageData,s=t.uid;i[s]=t,Object(a.p)(d,JSON.stringify(i))}),l.a.subscribe("usageDataRequestFailed",function(e){console.error("failed to get region data for: "+e),window.alert("Sorry, no data currently available for this region")}),l.a.subscribe("deleteUsageRequest",function(e){delete i[e],delete p[e],Object(a.p)(d,JSON.stringify(i)),u.b.primary_usage.setValueToDefault()}),window.getIpData=function(e){o.a.ipData=e,l.a.publish("ipDataReceived",e)},l.a.subscribe("ipDataReceived",function(e){var t=e.country;t&&t.match(/^[a-z]{2}$/i)&&Object(a.a)("/process/get_country_name.php?id="+t,{success:function(e){var t=JSON.parse(e);if(t&&t.id&&t.name){var s=r.e[t.id]||t.name;!function(e,t){var s='Detected your country as "'+t+'". Would you like to import usage data for that country?',i=Object(a.k)("button",{class:"ciu-button  region-detected-button"},"Import",{click:function(s){s.preventDefault(),l.a.publish("requestRegionData",{regionId:e}),n.a.empty(u),n.a.append(u,["Importing data for "+t+"...",Object(a.k)("div",{class:"progress-bar"})])}}),r=Object(a.k)("button",{class:"ciu-button  region-detected-button"},"No thanks",{click:function(e){e.preventDefault(),n.a.remove(u),Object(a.p)(h,"0")}}),o=Object(a.k)("div",{class:"region-button-wrap"},[i,r]),u=Object(a.k)("aside",{class:"country-message"},[s,o]);Object(a.g)(".ciu-page-header").appendChild(u),l.a.subscribe("usageDataReceived",function(t){t.usageData.uid==="region."+e&&n.a.remove(u)})}(t.id,s)}else console.error("Failed to get data from ")},error:function(){}})}),t.a={init:function(){var e=Object(a.n)(d);for(var t in i=e?JSON.parse(e):{},function(){var e=!1;for(var t in i)"region.global"!=t&&0===t.indexOf("region.")&&(e=!0);if(!e&&"0"!==Object(a.n)(h)){var s=document.createElement("script");s.src="//ipinfo.io/?callback=getIpData",Object(a.g)("head").appendChild(s)}}(),i){var s=i[t];g(i,t)&&l.a.publish("usageDataFound",s)}}}},function(e,t,s){"use strict";s.d(t,"e",function(){return u}),s.d(t,"a",function(){return p}),s.d(t,"b",function(){return w}),s.d(t,"d",function(){return y}),s.d(t,"c",function(){return S});var i=s(6),a=s.n(i),n=s(0),r=s(7),o=s(1),l=s(3);const u="(from URL)";var c,h,d,p=[],f=null,b=a.a.subclass({constructor:function(e){this.isTemp=!!e.isTemp,this.name=this.isTemp?"(temp)":e.name,this.rules=e.rules,this.arr=null;var t=[];this.rules.forEach(function(e){var s=e.match(/^>=\s*(\d*\.?\d+)%\s+in\s+((alt-)?\w\w)$/i);if(s){var i=s[2],a=Object(r.d)({regionId:i});t.push(a)}}.bind(this)),this.usageDataReady=Promise.all(t)},fetchArray:function(){var e=function(){try{this.arr=c(this.rules)}catch(e){alert(e.message)}return o.a.publish("browserSetReady",this),this.arr}.bind(this);return Promise.all([S(),this.usageDataReady]).then(e)}}),g=Object(n.n)("browserSets");function v(e){p=p.filter(function(t){return t.name!==e})}function m(){var e,t=r.c,s={};for(var i in t){"custom"===(o=t[i]).type&&(s[i]=o)}var a=Object.keys(s),n=l.b.primary_usage.value;if(n in s?e=n:a.length>0&&(e=a[0]),e){var o=r.c[e];c?c.setCustomUsage(o):S().then(function(e){e.setCustomUsage(o)})}}g?(g=JSON.parse(g),p=g):p=[];const w=function(e,t){var s=e||l.b.primary_browserset.value,i=p.filter(function(e){return e.name===s})[0];return i?(f=new b(i),t&&f.fetchArray(),f):null},y=function(e){p=e,v(u),Object(n.p)("browserSets",JSON.stringify(p))},S=function(){return d=d||new Promise(function(e,t){s.e(1).then(s.bind(null,18)).then(function(t){c=t.default,m(),e(c)})})};function k(e){"region"===e.type&&S().then(function(t){var s=e.id,i={};for(var a in e.dataByBrowser){var n=e.dataByBrowser[a];for(var r in n)i[a+" "+r]=n[r]}t.usage[s]=i})}o.a.subscribe("browserSetsChanged",function(){w(null,!0)}),o.a.subscribe("supportDataReady",function(){!function(){if(location.search.length){var e=Object(n.j)(location.search.substr(1));e.browserset&&S().then(function(){try{var t=e.browserset.split(","),s=c(t);h=new b({name:u,rules:t,arr:s}),p.push(h),o.a.publish("browserSetsChanged"),l.b.primary_browserset.setValue(u)}catch(e){return void alert("Invalid browserset given")}})}}(),w(null,!0)}),o.a.subscribe("deleteBrowserSetRequest",function(e){v(e),y(p);var t=p[0],s=t?t.name:"";o.a.publish("browserSetsChanged"),l.b.primary_browserset.setValue(s)}),o.a.subscribe("usageDataReceived",function(e){k(e.usageData)}),o.a.subscribe("usageDataFound",function(e){k(e)}),o.a.subscribe("configChanged",function(e){"primary_usage"===e.option&&m()})},function(e,t,s){"use strict";var i=s(0),a=s(5),n=s(4),r=s(1),o=s(3),l=void 0;function u(e){if(e.length){if(!(e.indexOf("=")>-1))return l=null,void((t=e)in n.a.supportDataByFeature?u("feat="+t):t in a.d?(r.a.publish("displayPageSection",t),scrollTo(0,0)):u("search="+t));l=Object(i.j)(e)}else l=void 0;var t;!function(){if(l){for(var e=["search","feat"],t=0;t<e.length;t++){var s=e[t];if(s in l){var i=l[s];l.feat=null,l.search=null,l.cats=null,l.statuses=null,l.compare=null,l[s]=i;break}}var a=["feat","search","cats","statuses"];for(t=0;t<a.length;t++){var n=a[t];n in l||(l[n]=null)}for(var u in l){var c=l[u];switch(u){case"cats":"compare"in l&&(u="compare_cats")}u in o.b&&(null===c?o.b[u].setValueToDefault(!0):o.b[u].setValueFromURL(c))}Object(o.e)()}else r.a.publish("locationToDefault")}(),r.a.publish("hashProcessed",{parameters:l,string:e})}r.a.subscribe("locationChange",u);t.a={currentSection:""}},function(e,t,s){"use strict";var i=s(5);t.a=function(e){var t={name:e.name,id:e.id,type:e.type,source:e.source,dataByBrowser:e.dataByBrowser,meta:e.meta,uid:e.type+"."+e.id};if("region"===e.type){var s=i.e[e.id];s&&(t.shortName=s)}return t}},function(e,t,s){"use strict";var i=s(1),a={SEARCH:1,FEATURES:2,COMPARISON:3,ALL:4},n=a.ALL;a.setMode=function(e){e!==n&&(n=e,i.a.publish("modeChanged",e))},a.getMode=function(){return n},t.a=a},,,,,,function(e,t,s){"use strict";s.r(t);var i,a,n=s(1),r=s(3),o=s(8),l=s(7),u=(s(11),s(4)),c=s(0),h=s(2),d=Object(c.g)(".js-feature-list-wrap"),p=Object(c.g)(".js-primary-options"),f=(Object(c.g)("#tables"),!1);function b(){var e=window.innerWidth||document.documentElement.clientWidth;n.a.publish("widthChanged",e)}function g(){var e=Object(c.k)("div",{class:"home__browser-score-options"}),t=function(e){for(var t=e.target,s=t.getAttribute("data-score"),a=0;a<i.length;a++)i[a]===t?i[a].classList.add("is-selected"):i[a].classList.remove("is-selected");!function(e){for(var t=Object(c.h)(".js-browser-scores [data-score-json]"),s=0;s<t.length;s++){var i=t[s],a=JSON.parse(i.getAttribute("data-score-json")),n=a[e],r=i.querySelectorAll("span"),o=r[0],l=r[1];o.innerText=n.name+": "+n.full,o.title="Full support: "+n.full+"pts",o.style.width=n.full/a.featCount*100+"%",l.title="Partial support: "+n.partial+"pts",l.style.width=n.partial/a.featCount*100+"%"}}(s)};e.innerHTML='            <button class="ciu-button  home__score-button  js-toggle-score  is-selected" data-score="current">Current version</button>            <button class="ciu-button  home__score-button  js-toggle-score" data-score="latest">Dev version</button>';var s=Object(c.g)(".js-browser-scores");s.parentNode.insertBefore(e,s);for(var i=Object(c.h)(".js-toggle-score"),a=0;a<i.length;a++)h.a.listen(i[a],"click",t)}var v,m,w=-1;function y(){++w>=a.length&&(w=0),a.forEach(function(e,t){t===w?h.a.show(e):h.a.hide(e)})}function S(){var e,t;!function(){for(var e=Object(c.h)(".js-most-searched a"),t=0;t<e.length;t++){var s=e[t];s.href="/#feat="+s.getAttribute("href")}}(),e=Object(c.g)(".js-dyk-list"),t=Object(c.h)("li",e),a=Array.prototype.slice.call(t),Object(c.o)(a),y(),h.a.listen(Object(c.g)(".js-next-dyk"),"click",y),n.a.subscribe("featureListReady",function(e){var t,s;g(),t=Object(c.g)(".js-score-notes"),s=!1,h.a.listen(Object(c.g)(".js-score-notes-btn"),"click",function(){s=!s,h.a.toggle(t,s)}),h.a.listen(Object(c.g)(".js-score-notes-close-btn"),"click",function(){s=!1,h.a.toggle(t,s)})})}function k(e){var t=document.body.classList;e?t.add("accessible-colors"):t.remove("accessible-colors")}function C(e){var t=document.body.classList;e?t.add("show-full-prefix"):t.remove("show-full-prefix")}function O(e,t){(f=null!=e?e:!f)?(h.a.show(p),d.classList.add("feature-list-wrap--with-options")):(h.a.hide(p),d.classList.remove("feature-list-wrap--with-options")),n.a.publish("optionsToggled",f,t)}function _(e){for(var t=0;t<e.length;t++){var s=document.createElement("fieldset"),a=e[t];if(s.id=a.optionId,a.installTo(s),a.heading){var o=document.createElement("legend");o.innerHTML=a.heading,s.insertBefore(o,s.firstChild)}p.appendChild(s);var l=r.b[a.optionId];l&&l.setInitialValue(a.getValuesForConfig())}n.a.publish("optionsInitialized",null),i=Object(c.g)(".js-options-toggle"),h.a.listen(i,"click",function(){O()}),h.a.listen(document.body,"click",function(e){e.target.classList.contains("js-show-settings")&&O(!0)}),Object(c.g)(".js-search").appendChild(i),O(!1,!0)}function j(e){e.installTo(Object(c.g)(".js-feature-list"))}function B(e){e.installTo(Object(c.g)(".js-feature-list-wrap"))}n.a.subscribe("configInitialized",function(){k(r.b.accessible_colors.value),C(r.b.show_full_prefix.value)}),n.a.subscribe("configChanged",function(e){"accessible_colors"==e.option?k(e.values):"show_full_prefix"==e.option&&C(e.values)}),n.a.subscribe("widthChanged",function(e){}),v={CN:["and_uc","and_qq"],as:["and_uc","and_qq"]},m=function(e){if("region"===e.type){var t=r.b.agents,s=t.value.slice(),i=v[e.id];if(i){for(var a=0;a<i.length;a++){var n=i[a];-1===s.indexOf(n)&&s.push(n)}t.setValue(s)}}},n.a.subscribe("usageDataFound",function(e){m(e)}),n.a.subscribe("usageDataReceived",function(e){m(e.usageData)});var L={init:function(){var e,t,s,i;document.body.parentNode.classList.remove("no-js"),(history.pushState&&location.search.indexOf("code=")>-1||location.search.indexOf("logout=")>-1)&&history.pushState({},"Home","/"),n.a.subscribe("domReady",function(){h.a.listen(Object(c.g)(".js-section-index"),"click",function(e){var t=e.target;if("A"==t.tagName){e.preventDefault();var s=t.getAttribute("href");if(-1===s.indexOf("=")){var i="feat="+s;n.a.publish("hashChangeRequest",i)}else{var a=t.hash.substr(1);a=a.replace("JS_API","JS API"),n.a.publish("hashChangeRequest",a)}}}),h.a.listen(document.body,"click",function(e){var t=e.target;if("A"==t.tagName){var s=t.href,i=t.getAttribute("href").match(/(#feat=[a-z-]+)$/);if(0===s.indexOf(location.origin)&&i&&i.length>1){e.preventDefault();var a=i[1];n.a.publish("locationChange",a.substr(1))}}})}),window.addEventListener("scroll",function(){clearTimeout(e),t||(document.body.classList.add("no-pointer-events"),t=!0),e=setTimeout(function(){document.body.classList.remove("no-pointer-events"),t=!1},500)}),s=Object(c.g)(".js-search input"),i=Object(c.g)(".js-search-result-info"),n.a.publish("searchInputReady",s,i),S(),h.a.listen(window,"resize",b),b(),n.a.subscribe("optionsReady",_),n.a.subscribe("featureListReady",j),n.a.subscribe("optionTagsReady",B),n.a.publish("domReady",null),setTimeout(function(){n.a.publish("secondaryInit",null)},1e3)},showSidebar:function(){O(!0)}},V=null,x=!1,I=!1;function T(e,t){if((e=e.replace(/^#/,""))!==location.hash.replace(/^#/,""))if(x=!0,V=e,t&&t.blockEffect)if(history.pushState){history.pushState(null,null,"#"+e);e.length;x=!1}else I=!0,location.hash=e;else location.hash=e,console.log("New hash change:",V)}function M(e){var t=e.match(/\#(.*)/);return t?t[1]:""}function A(){n.a.publish("locationChange",V)}function E(e){if(e&&e.preventDefault(),x)I||A();else{var t=M(location.hash);t!==V&&(V=t,A())}I=!1,x=!1}h.a.listen(window,"hashchange",E),n.a.subscribe("rootTabClicked",function(e){var t=M(e);t!==V?T(t):n.a.publish("locationToDefault")}),n.a.subscribe("hashChangeRequest",T);var D=!1;function F(){D&&E()}n.a.subscribe("optionsInitialized",function(){D=!0,F()}),n.a.subscribe("featureListReady",function(){!0,F()});var N=s(5),R=s(9),U=null,P={},H=function(e){var t,s,i=this;this.select=function(){this.tab.classList.add("active"),this.section.style.display="block"},this.deselect=function(){this.tab.classList.remove("active"),this.section.style.display="none"},this.section=(t=e,(s=document.getElementById(t)).removeAttribute("id"),s.classList.add("js-section-"+t),s),this.tab=function(e){return Object(c.g)("a[href='#"+e+"']").parentNode}(e),h.a.listen(this.tab.firstChild,"click",function(e){i.tab===U.tab&&(e.preventDefault(),q("tables"))})};function q(e,t){if(e in P){U&&U.deselect(),R.a.currentSection=e,(U=P[e]).select();n.a.publish("pageSectionDisplayed",e,{blockScroll:t})}else console.warn("Unable to find section "+e)}n.a.subscribe("configInitialized",function(){!0}),n.a.subscribe("domReady",function(){!function(){var e=N.d;for(var t in e)P[t]=new H(t)}(),n.a.subscribe("displayPageSection",q),n.a.subscribe("locationToDefault",function(){q("home")}),n.a.subscribe("searchFocused",function(){q("tables",!0)}),n.a.publish("sectionUIReady")});var G,z=!1;function W(e){if(!e.description)return null;var t="<p>"+e.description.split("\n").join("</p><p>")+"</p>",s=Object(c.k)("div",{class:"news-item__content"});return s.innerHTML=t,Object(c.k)("article",{class:"news-item"},[Object(c.k)("date",{class:"news-item__date"},e.date),Object(c.k)("h3",{class:"news-item__heading"},e.title),s])}n.a.subscribe("domReady",function(){G=Object(c.g)(".js-news-root")}),n.a.subscribe("displayPageSection",function(e){"info_news"===e&&(z||(G.appendChild(Object(c.k)("h3",{class:"ciu-section-heading"},"News")),Object(c.a)("/process/get_news.php",{success:function(e){var t=JSON.parse(e);(t=t.concat(u.a.featureNews)).sort(function(e,t){return+e.unix_time<+t.unix_time?1:-1});for(var s=Object(c.k)(),i=0;i<30;i++){var a=W(t[i]);a&&s.appendChild(a)}G.appendChild(s)},error:function(){console.error("failed to get news")}}),z=!0))}),window.Caniuse=window.Caniuse||{};var J=[ae,le,ie,re,oe,Q,te,se,ne,ue],Y={};function $(e){var t=e.isChecked?" checked":"",s=e.id?' id="'+e.id+'"':"",i=e.classes?' class="'+e.classes+'"':"",a=e.dataVal?" data-"+e.dataVal:"";return"<label"+(e.labelClasses?' class="'+e.labelClasses+'"':"")+(e.labelTitle?' title="'+e.labelTitle+'"':"")+'><input type="checkbox" value="'+e.val+'"'+s+i+a+t+">"+(e.urlParam?'<a href="#'+e.urlParam+"="+e.val+'">'+e.label+"</a>":e.label)+"</label>"}function K(e,t,s){return $({val:t=t||"all",label:s=s||"All",dataVal:'select-subjects="'+e+'"'})}function Z(e,t,s,i){function a(){for(var s=!0,i=0;i<t.length;i++){if(!t[i].checked){s=!1;break}}e.checked=s}function n(){a(),s&&s.call(i)}e.addEventListener("change",function(){for(var a=e.checked,n=0;n<t.length;n++)t[n].checked=a;s&&s.call(i)},!1);for(var r=0;r<t.length;r++){t[r].addEventListener("change",n,!1)}return a}function X(){this.optionId="",this.supportId="",this.heading="",this._configSetting=null,this._changeHandler=null,this._optionData=null,this._html=null,this._container=null,this._cleanupFuncs=[],this._values={}}function Q(){X.apply(this,arguments),this.optionId="agents",this.supportId="browsersByType",this.heading="Browsers",this._checkboxInputs=null}function ee(){X.apply(this,arguments),this.optionId="compare",this.supportId="",this.heading="",this._checkboxInputs=null}function te(){X.apply(this,arguments),this.optionId="cats",this.supportId="categories",this.heading="Categories",this._checkboxInputs=null}function se(){X.apply(this,arguments),this.optionId="statuses",this.supportId="statuses",this.heading="Statuses",this._checkboxInputs=null}function ie(){X.apply(this,arguments),this.optionId="versions_shown",this.heading="Usage threshold",this.supportId=null,this._checkboxInputs=null,this._usageThresholdInput=null,this._rangeAttributes={step:.1,min:0,max:10,value:0},this._usageThresholdLabelElement=null,this._usageThresholdLabelClass="usage-val",this._missingValueLabelElement=null,this._missingValueLabelClass="missing-val",this._installCallbacks=[]}function ae(){X.apply(this,arguments),this.optionId="usage_region",this.heading="Add usage source",this.supportId=null,this.container=null}function ne(){X.apply(this,arguments),this.optionId="misc",this.heading="Misc"}function re(){X.apply(this,arguments),this.optionId="default_viewmode",this.heading="Default display settings"}function oe(){X.apply(this,arguments),this.optionId="default_showmode",this.heading=""}function le(){X.apply(this,arguments),this.optionId="primary_browserset",this.heading="Browser set"}function ue(){X.apply(this,arguments),this.optionId="feature_sort",this.heading="List sort"}X.prototype.init=function(e){this._optionData=e[this.supportId],this._configSetting=r.b[this.optionId]},X.prototype._inputsChanged=function(){var e=this.getValuesForConfig();this._changeHandler?this._changeHandler(this.optionId,this._values):this._configSetting.setValueFromUI(e)},X.prototype.setChangeHandler=function(e){this._changeHandler=e},X.prototype.getValuesForConfig=function(){return this._checkboxInputs?(this.getValuesFromCheckboxes(),function(e){var t=[];for(var s in e)!0===e[s]&&t.push(s);return t}(this._values)):this._values},X.prototype.updateFromConfig=function(){var e=this._configSetting;if(e){var t=e.value;if(t===r.c.NOT_APPLICABLE);else if(e.matchesAll())for(var s in this._values)this._values[s]=!0;else!function(e,t){for(var s in e)t.indexOf(s)>-1?e[s]=!0:e[s]=!1}(this._values,t);this._checkboxInputs&&function(e,t){for(var s=0;s<e.length;s++){var i=e[s],a=!0===t[i.value];i.checked=a}}(this._checkboxInputs,this._values),this.cleanup()}},X.prototype.installTo=function(e){this._container=e,this._html&&(e.innerHTML=this._html);var t=this;n.a.subscribe("configChanged",function(e){e.changeSource!==r.a.UI&&t.optionId==e.option&&t.updateFromConfig()})},X.prototype.setupDefaultMultiCheckboxSelect=function(e){var t=this._container,s=Z(t.querySelector("input[data-select-subjects='"+e+"']"),t.querySelectorAll("input[data-select-id='"+e+"']"),this._inputsChanged,this);this._cleanupFuncs.push(s)},X.prototype.onDisplay=function(){},X.prototype.cleanup=function(){for(var e=0;e<this._cleanupFuncs.length;e++)this._cleanupFuncs[e].call(null)},X.prototype.getValuesFromCheckboxes=function(){if(!this._checkboxInputs)throw Error("No checkboxes for "+this.optionId);for(var e=this._checkboxInputs,t=0;t<e.length;t++){var s=e[t];this._values[s.value]=s.checked}return this._values},Q.prototype=new X,Q.prototype.init=function(e){X.prototype.init.apply(this,arguments);var t=this._optionData,s=[],i=function(){var e,i="",a=(e=n).substring(1,0).toUpperCase()+e.substr(1),r=t[n];for(var o in i+=K(n,n,a),i+='<div class="browser-list--'+n+'">',r){var l=r[o];s.push(o),i+=$({val:o,label:l.browser,labelClasses:"sub",classes:"browser",dataVal:'select-id="'+n+'"'})}return i+="</div>"},a="";for(var n in a+=K("all-browsers"),t)a+='<div class="optwrap">',a+=i(),a+="</div>";this._configSetting.setValuesForAll(s),this._html=a},Q.prototype.installTo=function(e){X.prototype.installTo.apply(this,arguments);var t=e.querySelectorAll("input.browser");this._checkboxInputs=t,this.getValuesFromCheckboxes();var s="";for(var i in this._optionData)this.setupDefaultMultiCheckboxSelect(i),s+="input[data-select-subjects='"+i+"'], ";s+="input.browser";var a=this._container.querySelector("input[data-select-subjects='all-browsers']"),n=Z(a,this._container.querySelectorAll(s),null,this),r=this;a.addEventListener("change",function(){r._inputsChanged()},!1),this._cleanupFuncs.push(n),this.updateFromConfig()},ee.prototype=new X,ee.prototype.init=function(e){X.prototype.init.apply(this,arguments);var t="";for(var s in e){var i=e[s];t+="<fieldset><legend>"+i.browser+"</legend>";for(var a=i.version_list,n=0;n<a.length;n++){var r=a[n];t+=$({val:s+"+"+r.version,label:r.version,labelTitle:0===r.era?"Current version":null,labelClasses:0===r.era?"label--current-version":null,dataVal:'select-id="'+this.optionId+'"'})}t+="</fieldset>"}t+='<button class="ciu-button browser-compare-reset">Reset selected browsers</button>',this._html=t},ee.prototype.installTo=function(e){X.prototype.installTo.apply(this,arguments);var t="input[data-select-id='"+this.optionId+"']";this._checkboxInputs=e.querySelectorAll(t);for(var s=this,i=0;i<this._checkboxInputs.length;i++){var a=this._checkboxInputs[i];h.a.listen(a,"change",s._inputsChanged,this)}this.getValuesFromCheckboxes();var n=e.querySelector(".browser-compare-reset");h.a.listen(n,"click",function(){for(var e=0;e<s._checkboxInputs.length;e++)s._checkboxInputs[e].checked=!1;s._inputsChanged()}),this.updateFromConfig()},ee.prototype.updateFromValues=function(e){for(var t=0;t<this._checkboxInputs.length;t++){var s=this._checkboxInputs[t];!0===e[s.value]?s.checked=!0:s.checked=!1}this._inputsChanged()},te.prototype=new X,te.prototype.init=function(e){X.prototype.init.apply(this,arguments);for(var t=this._optionData,s=K(this.optionId),i=[],a=0;a<t.length;a++){var n=t[a];i.push(n),s+=$({val:n,label:n,dataVal:'select-id="'+this.optionId+'"',urlParam:this.optionId})}this._configSetting.setValuesForAll(i),this._html=s},te.prototype.installTo=function(e){var t=this;X.prototype.installTo.apply(this,arguments),this.setupDefaultMultiCheckboxSelect(this.optionId);var s="input[data-select-id='"+this.optionId+"']";this._checkboxInputs=e.querySelectorAll(s);for(var i=function(e){e.preventDefault();var s=e.target.getAttribute("href").split("="),i=s[0].substr(1),a=s[1].split(",");r.b[i].setValueFromUI(a),t.updateFromConfig()},a=Object(c.h)("a",e),n=0;n<a.length;n++)h.a.listen(a[n],"click",i);this.getValuesFromCheckboxes(),this.updateFromConfig()},se.prototype=new X,se.prototype.init=function(e){X.prototype.init.apply(this,arguments);var t=this._optionData,s=K(this.optionId),i=[];for(var a in t){t[a],i.push(a);var n=a.length<=3?a.toUpperCase():a;s+=$({val:a,label:n,dataVal:'select-id="'+this.optionId+'"',urlParam:"statuses"})}this._configSetting.setValuesForAll(i),this._html=s},se.prototype.installTo=function(e){X.prototype.installTo.apply(this,arguments),this.setupDefaultMultiCheckboxSelect(this.optionId);var t="input[data-select-id='"+this.optionId+"']";this._checkboxInputs=e.querySelectorAll(t),this.getValuesFromCheckboxes(),this.updateFromConfig()},function(){var e;ie.prototype=new X,ie.prototype.addUsageSource=function(e,t){var s=this,i=function(){if(!s.usageSourceSelect){var i=Object(c.k)("div",{class:"settings__subset"},null),a=Object(c.k)("label",{class:"settings-label",for:"usage-source-select"},"Source:");s.usageSourceSelect=Object(c.k)("select",{id:"usage-source-select"},null,{change:function(e){r.b.primary_usage.setValueFromUI(this.value)}}),s.deleteUsageButton=Object(c.k)("button",{class:"ciu-button ciu-button--small  delete-usage-btn"},"Delete",{click:function(){var e=s.usageSourceSelect.value;if("region.global"==e)window.alert("Cannot delete global data");else{var t=l.c[e].name;window.confirm('Remove usage data for "'+t+'"?')&&n.a.publish("deleteUsageRequest",e)}}}),i.appendChild(a),i.appendChild(Object(c.k)("div",{class:"select"},[s.usageSourceSelect])),i.appendChild(s.deleteUsageButton);var o=Object(c.k)("option",{value:"region.global"},"Global");s.usageSourceSelect.appendChild(o),h.a.prepend(s._container,i)}var u=Object(c.k)("option",{value:e},t);s.usageSourceSelect.appendChild(u);var d=r.b.primary_usage.value;s.usageSourceSelect.value=d};s._container?i.call(this):this._installCallbacks.push(i)},ie.prototype.removeUsageSource=function(e){for(var t=this.usageSourceSelect.childNodes,s=0;s<t.length;s++){var i=t[s];if(i.value==e){h.a.remove(i);break}}},ie.prototype.init=function(e){X.prototype.init.apply(this,arguments);var t=this._rangeAttributes,s="",i=this;s='<div class="settings__subset"><label title="Show only browser versions with at least this much usage (current and future always shown)">Min. browser usage: <span class="'+i._usageThresholdLabelClass+'"></span>%: <input class="usage-threshold" type="range" step="'+t.step+'" min="'+t.min+'" max="'+t.max+'" value="'+t.value+'"></label></div>',s+='<p class="settings__subset dim" title="The total percentage of user share that is being hidden">Total users not shown: <span class="'+i._missingValueLabelClass+'"></span>%</p>',i._html=s,n.a.subscribe("configChanged",function(e){"usage_threshold"===e.option?i._updateLabels():"primary_usage"===e.option&&e.changeSource!==r.a.UI&&i.usageSourceSelect&&(i.usageSourceSelect.value=e.values)})};var t=function(){var t=r.b.usage_threshold.getValueForSlider();e.value=t},s=function(e){var s=e.target,i=s.textContent,a=r.b.usage_threshold;if(""===i)a.setValueToDefault(),i=a.value;else{if(isNaN(i))return void(s.innerHTML=s.getAttribute("data-orig"));i=i>100?100:i<0?0:+i}s.innerHTML=i,a.setValue(i),t()},i=function(e){e.stopPropagation(),setTimeout(function(){e.target.focus(),document.execCommand("selectAll",!1,null),e.target.setAttribute("data-orig",e.target.textContent)},1)};ie.prototype._updateLabels=function(){var e=r.b.usage_threshold.value;this._usageThresholdLabelElement||(this._usageThresholdLabelElement=this._container.querySelector("."+this._usageThresholdLabelClass),this._usageThresholdLabelElement.contentEditable=!0,h.a.listen(this._usageThresholdLabelElement,"focus",i),h.a.listen(this._usageThresholdLabelElement,"blur",s),h.a.listen(this._usageThresholdLabelElement,"click",i)),this._usageThresholdLabelElement.innerHTML=e},ie.prototype.installTo=function(s){X.prototype.installTo.apply(this,arguments);var i=this,a=r.b.usage_threshold;e=Object(c.g)(".usage-threshold",s),t(),this._updateLabels();var o=function(){a.setValueFromSlider(e.value)};h.a.listen(e,"change",o),h.a.listen(e,"input",o),this._missingValueLabelElement||(this._missingValueLabelElement=this._container.querySelector("."+this._missingValueLabelClass)),n.a.subscribe("missingUsageUpdate",function(e){i._missingValueLabelElement.innerHTML=Object(c.m)(e,2)});for(var l=0;l<this._installCallbacks.length;l++)this._installCallbacks[l].call(this);n.a.subscribe("optionsToggled",function(e){e&&i.onDisplay()})}}(),ae.prototype=new X,ae.prototype.getValuesForConfig=function(){return this._configSetting.value},ae.prototype.onDisplay=function(){},ae.prototype.getRegionList=function(e){var t={},i="usage-regions",a=this.inputField;this.inputField.setAttribute("list",i);var r=this.dataList=Object(c.k)("datalist",{id:i});if(this.container.appendChild(r),e){var o,d=!(!document.createElement("datalist")||!window.HTMLDataListElement),p=navigator.userAgent.indexOf("MSIE")>-1&&!d;for(var f in p&&((o=Object(c.k)("select")).setAttribute("data-datalist",i),r.appendChild(o)),e){var b=e[f];t[b]=f;var g=document.createElement("option");g.value=b,p?o.appendChild(g):r.appendChild(g)}u.a.regionNameById=e,u.a.regionIdByName=t,d||s.e(3).then(s.t.bind(null,19,7));var v=Object(c.k)("div",{style:"display:none",class:"progress-bar"},"Importing..."),m=Object(c.k)("button",{class:"ciu-button ciu-button--region-import"},"Import");m.onclick=function(){var e=t[a.value];return e?"region."+e in l.c?(window.alert("Selected region already imported"),void a.focus()):void n.a.publish("requestRegionData",{regionId:e}):(window.alert("Invalid region"),void a.focus())};var w=function(){v.style.display="none",m.removeAttribute("disabled"),a.value=""};n.a.subscribe("usageDataFound",w),n.a.subscribe("usageDataReceived",w),n.a.subscribe("usageDataRequestFailed",w),n.a.subscribe("requestRegionData",function(){v.style.display="block",m.setAttribute("disabled","disabled")});var y=Object(c.k)(null,null,[m,v,r]);h.a.insertAfter(y,a),n.a.publish("regionOptionSetReady",e)}else window.console.error("Failed to receive region name list")},ae.prototype.populateRegionOptions=function(){var e=this;Object(c.a)("/resources/statcounter-regions.json",{success:function(t){e.getRegionList.call(e,JSON.parse(t))}})},ae.prototype.installTo=function(e){X.prototype.installTo.apply(this,arguments),this.container=e;var t=Object(c.k)("h4",{class:"settings__subhead"},"From geography:"),s=Object(c.k)("h4",{class:"settings__subhead"},"From Google Analytics:"),i=Object(c.k)("button",{class:"ciu-button  ciu-button--ga-import"},"Import...",{click:function(){n.a.publish("analyticsImportRequest")}}),a=this.inputField=Object(c.k)("input",{class:"region-input",name:"usage-region",placeholder:"Enter country/region"},null,{click:function(){this.select()}});e.appendChild(t),e.appendChild(a),e.appendChild(s),e.appendChild(i);var r=this;n.a.subscribe("optionsToggled",function(e){e&&r.onDisplay()}),n.a.subscribe("secondaryInit",function(){r.populateRegionOptions()}),n.a.subscribe("requestUsageUpdate",function(e){var t=e.split("."),s=t[0],i=t[1];"region"==s&&n.a.publish("requestRegionData",{regionId:i,updateOnly:!0})},this)},ne.prototype=new X,ne.prototype.init=function(e){var t=this;X.prototype.init.apply(this,arguments),n.a.subscribe("configChanged",function(e){e.changeSource!==r.a.UI&&"accessible_colors"==e.option&&(t.checkboxElem.checked=e.values)})},ne.prototype.addAccessibleColors=function(){var e=r.b.accessible_colors,t=Object(c.k)("input",{type:"checkbox"},null,{change:function(){e.setValueFromUI(this.checked)}});!0===e.value&&(t.checked=!0);var s=Object(c.k)("label",null,[t,"Accessible colors"]);this.checkboxElem=t,this.container.appendChild(s)},ne.prototype.addShowFullPrefix=function(){var e=r.b.show_full_prefix,t=Object(c.k)("input",{type:"checkbox"},null,{change:function(){e.setValueFromUI(this.checked)}});!0===e.value&&(t.checked=!0);var s=Object(c.k)("label",null,[t,"Show full prefixes"]);this.container.appendChild(s)},ne.prototype.installTo=function(e){X.prototype.installTo.apply(this,arguments),this.container=e,this.addAccessibleColors(),this.addShowFullPrefix()},function(){re.prototype=new X,re.prototype.init=function(){X.prototype.init.apply(this,arguments),this._configSetting.value=r.b[this.optionId].value};var e="view-mode-normal",t="view-mode-usage_relative",s="view-mode-date_relative";re.prototype.updateFromConfig=function(){this.selectElem.value=this._configSetting.value},re.prototype.getValuesForConfig=function(){return this._configSetting.value},re.prototype.installTo=function(i){X.prototype.installTo.apply(this,arguments),this.container=i;var a=this.optionId,n={};n[e]="Current aligned",n[t]="Usage relative",n[s]="Date relative";var o=Object(c.k)("select",null,null,{change:function(){r.b[a].setValueFromUI(this.value)}}),l=Object(c.k)("div",{class:"select"},[o]);for(var u in n){var h=n[u],d=Object(c.k)("option",{value:u},h);o.appendChild(d)}this.selectElem=o;var p=Object(c.k)("span",{},"View mode: ");this.container.appendChild(p),this.container.appendChild(l),this.updateFromConfig()}}(),oe.prototype=new X,oe.prototype.init=function(){X.prototype.init.apply(this,arguments),this._configSetting.value=r.b[this.optionId].value},oe.prototype.updateFromConfig=function(){this.selectElem.value=this._configSetting.value},oe.prototype.getValuesForConfig=function(){return this._configSetting.value},oe.prototype.installTo=function(e){X.prototype.installTo.apply(this,arguments),this.container=e;var t=this.optionId,s={0:"Filtered",1:"All"},i=Object(c.k)("select",null,null,{change:function(){r.b[t].setValueFromUI(this.value)}});for(var a in s){var n=s[a],o=Object(c.k)("option",{value:a},n);i.appendChild(o)}this.selectElem=i;var l=Object(c.k)("div",{class:"select"},[i]),u=Object(c.k)("span",{},"Show: ");this.container.appendChild(u),this.container.appendChild(l),this.updateFromConfig()},le.prototype=new X,le.prototype.init=function(){X.prototype.init.apply(this,arguments),this._configSetting.value=r.b[this.optionId].value},le.prototype.updateFromConfig=function(){this.selectElem.value=r.b[this.optionId].value,this.updateButtons()},le.prototype.getValuesForConfig=function(){return this._configSetting.value},le.prototype.fetchBrowserSets=function(){return o.a},le.prototype.updateList=function(e){var t=this.fetchBrowserSets();h.a.empty(this.selectElem);var s=Object(c.k)("option",{value:""},"(none)");for(var i in this.selectElem.appendChild(s),t){var a=t[i].name,n=Object(c.k)("option",{value:a},a);this.selectElem.appendChild(n)}},le.prototype.updateButtons=function(){var e,t=""===this.selectElem.value;this.editSetButton.disabled=t,this.deleteSetButton.disabled=t,e=t?"":Object(o.b)().rules.join("\n"),this.selectElem.title=e},le.prototype.handleIncludeCurrentChange=function(){var e=Object(c.g)(".js-include-current");r.b.include_current.setValue(e.checked)},le.prototype.installTo=function(e){X.prototype.installTo.apply(this,arguments),this.container=e,this.optionId;var t=Object(c.k)("button",{class:"ciu-button  ciu-button--small  js-add-browserset"},"Add new set",{click:function(){n.a.publish("browsersetAddRequest")}}),s=Object(c.k)("label",{class:"label--small"},[Object(c.k)("input",{type:"checkbox",class:"js-include-current"},[],{change:this.handleIncludeCurrentChange.bind(this)}),"Always show current & upcoming"]);s.firstChild.checked=r.b.include_current.value;var i=Object(c.k)("select",null,null,{change:function(){r.b[this.optionId].setValueFromUI(this.selectElem.value),this.updateButtons()}.bind(this)});this.selectElem=i;var a=Object(c.k)("div",{class:"select"},[i]);this.updateList(),this.editSetButton=Object(c.k)("button",{class:"ciu-button ciu-button--small",disabled:"disabled"},"Edit",{click:function(){n.a.publish("browsersetEditRequest",i.value)}}),this.deleteSetButton=Object(c.k)("button",{class:"ciu-button ciu-button--small",disabled:"disabled"},"Delete",{click:function(){var e=i.value;""!==e&&window.confirm('Remove "'+e+'"?')&&n.a.publish("deleteBrowserSetRequest",e)}}),n.a.subscribe("browserSetsChanged",function(){this.updateList(),this.updateFromConfig()}.bind(this));var o=Object(c.k)("div",{class:"browserset-controls"});e.appendChild(s),o.appendChild(a),o.appendChild(this.deleteSetButton),o.appendChild(this.editSetButton),e.appendChild(o),e.appendChild(t),this.updateFromConfig()},ue.prototype=new X,ue.prototype.init=function(){X.prototype.init.apply(this,arguments),this._configSetting.value=r.b[this.optionId].value},ue.prototype.updateFromConfig=function(){this.selectElem.value=this._configSetting.value},ue.prototype.getValuesForConfig=function(){return this._configSetting.value},ue.prototype.installTo=function(e){X.prototype.installTo.apply(this,arguments),this.container=e;var t=this.optionId,s=Object(c.k)("select",null,null,{change:function(){r.b[t].setValueFromUI(this.value)}});for(var i in N.f){var a=N.f[i],n=Object(c.k)("option",{value:i},a);s.appendChild(n)}this.selectElem=s;var o=Object(c.k)("div",{class:"select"},[s]);e.appendChild(o)};for(var ce=0;ce<J.length;ce++){var he=new J[ce];Y[he.optionId]=he}var de=Y.versions_shown,pe=function(e){de.addUsageSource(e.uid,e.shortName||e.name)};n.a.subscribe("usageDataFound",pe),n.a.subscribe("usageDataReceived",function(e){e.initialRequest&&pe(e.usageData)}),n.a.subscribe("deleteUsageRequest",function(e){de.removeUsageSource(e)});n.a.subscribe("baseDataReady",function(e){var t=[];for(var s in Y){var i=Y[s];i.init(e),t.push(i)}n.a.subscribe("domReady",function(){n.a.publish("optionsReady",t)})});var fe=s(6),be=s.n(fe);var ge,ve,me,we,ye,Se=be.a.subclass({constructor:function(){var e=this;this.el=Object(c.k)("div",{class:"option-tags"}),this.tagsById={},n.a.subscribe("configChanged",function(t){var s=t.option,i=t.values;e.updateTags(s,i)})},installTo:function(e){h.a.prepend(e,this.el)},makeTag:function(e,t){var s=Object(c.k)("button",{class:"option-tag__button",title:"Remove filter"},"x",{click:function(t){t.preventDefault(),r.b[e].setValueToDefault()}}),i=Object(c.k)("span",{class:"option-tag__label"}),a=Object(c.k)("div",{class:"option-tag"},[s,i]);i.innerHTML=t,this.el.appendChild(a),this.tagsById[e]=a},makeFeaturesTag:function(e){if(e.length){for(var t=[],s=u.d.featuresById,i=0;i<e.length;i++){var a=s[e[i]];t.push(a.title)}var n="Feature: "+t.join(", ");this.makeTag("feat",n)}},makeCategoriesTag:function(e){if(e.length){for(var t=[],s=0;s<e.length;s++){var i=e[s];t.push(i)}var a="Categories: "+t.join(", ");this.makeTag("cats",a)}},makeStatusesTag:function(e){if(e.length){for(var t=[],s=0;s<e.length;s++){var i=e[s];t.push(i)}var a="Statuses: "+t.join(", ").toUpperCase();this.makeTag("statuses",a)}},updateTags:function(e,t){var s=this.tagsById[e];if(s&&h.a.remove(s),!r.b[e].matchesDefault())switch(e){case"feat":this.makeFeaturesTag(t);break;case"cats":this.makeCategoriesTag(t);break;case"statuses":this.makeStatusesTag(t)}}}),ke=be.a.subclass({minWidth:50,getVisibleCurrentCell:function(){for(var e=Object(c.h)(".current",this.el),t=0;t<e.length;t++){if(e[t].clientWidth>0)return e[t]}return null},getSentinel:function(){var e=this.getVisibleCurrentCell();return e?{el:e,width:e.clientWidth}:null},_setMinWidth:function(){var e=this.browserSupportViewsById,t=0;for(var s in e)e[s].isShown&&t++;this.el.style.minWidth=t*this.minWidth+"px"},updateHeaderPosition:function(){this.fixedHeader&&this.toggleSupportViewFixed(!1);var e=window.pageYOffset-document.documentElement.clientTop,t=this.el.getBoundingClientRect(),s=parseInt(window.getComputedStyle(this.el)["padding-top"],10),i=this.getVisibleCurrentCell().getBoundingClientRect();this.headerHeight=this.getHeaderHeight(),this.topOffset=t.top+s+e,this.currentRowOffset=i.top+e-this.headerHeight,this.bottomOffset=t.bottom+e,this.fixedHeader&&this.toggleSupportViewFixed(!0)},toggleSupportViewFixed:function(e){var t="";e&&(t=parseInt(window.getComputedStyle(this.el)["margin-top"],10)+this.headerHeight+"px");for(var s in this.el.style.marginTop=t,this.browserSupportViewsById){this.browserSupportViewsById[s].toggleFixed(e)}h.a.toggleClass(this.el,"has-fixed-headers",e)},positionHeader:function(e){var t=this.scrollY,s=this.bottomOffset-this.topOffset>400&&this.topOffset<t&&this.currentRowOffset>t-this.headerHeight;!e&&this.fixedHeader&&s||!this.fixedHeader&&!s||(e&&s&&(this.toggleSupportViewFixed(!1),this.fixedHeader=s),this.toggleSupportViewFixed(s),this.fixedHeader=s)},_updateHeaderText:function(e){for(var t in this.browserSupportViewsById){var s=this.browserSupportViewsById[t];s.isShown&&s.updateHeaderText(e)}},handleCellSizeChange:function(){var e=this.el,t=this.getSentinel();if(t){for(var s=e.classList,i=0;i<s.length;i++){var a=s[i];0===a.indexOf("cell-size-")&&s.remove(a)}var n=Math.ceil(t.width/16),r="cell-size-"+n;this._setMinWidth(),s.add(r),this.browserNotesEl&&this.positionBrowserNotes(),this._updateHeaderText(n),this.currentViewMode===N.b.NORMAL&&(this.updateHeaderPosition(),this.positionHeader(!0))}}}),Ce=be.a.subclass({getEraClass:function(e){return e<0?"past":0===e?"current":"future"},onPrimaryUsageChange:function(){this.updateFromViewMode()},updateFromViewMode:function(){var e=this.featureModel.get("viewMode");this.onViewModeChange(e)},onShownChange:function(){switch(this.featureModel.get("viewMode")){case N.b.NORMAL:this.styleFromShown()}},styleFromShown:function(){var e=this.versionModel.get("isShown"),t=r.b.include_current.value;this.versionModel.era<0?(h.a.toggle(this.el,e),this.isShown=e):t?(this.el.style.visibility="visible",h.a.show(this.el),this.isShown=!0):(this.el.style.visibility=e?"visible":"hidden",this.isShown=e)},onViewModeChange:function(e){switch(this.el.setAttribute("style",""),e){case N.b.NORMAL:if(!this.isShown)return void h.a.hide(this.el);this.styleFromShown();break;case N.b.USAGE_RELATIVE:if(!this.isShown)return void h.a.hide(this.el);this.styleFromUsage();break;case N.b.DATE_RELATIVE:h.a.show(this.el),this.styleFromDate()}},forceShow:function(){h.a.show(this.el),this.isShown,this.isShown=!0},hide:function(){h.a.hide(this.el),this.isShown=!1},resetShown:function(){this.featureModel||this.summaryModel;this.styleFromShown(this.versionModel.get("isShown"))},styleFromDate:function(){var e=this.versionModel.releaseDate;if(e){this.el.style.opacity=this.isShown?1:.5;var t=Date.now(),s=Math.floor((t-e.getTime())/864e5),i=Math.round(.5*s);this.el.style.bottom=40+i+"px"}else this.el.style.display="none"},styleFromUsage:function(){var e,t,s=r.b.primary_usage.value,i=this.getUsagePercentage(s),a=this.el.style,n=10*i;a.height=n+"px",n<20&&n>=8?(e=n-2,t=n+1):n<8?(n<=1&&h.a.hide(this.el),e=0,t=0):(e=Math.min(n-10,20),t=n-4),a.fontSize=e+"px",a.lineHeight=t+"px"}}),Oe=Ce.subclass({constructor:function(e,t,s,i){this.el=null,this.versionModel=e,this.supportValue=t,this.featureModel=s,this.featureSupportView=i,this.makeElement(),this.HIGHLIGHT_CLASS="highlight",this.styleFromShown(e.get("isShown")),e.on("change:isShown",this.onShownChange,this),u.g.on("change:primaryUsage",this.onPrimaryUsageChange,this),s.on("change:viewMode",this.onViewModeChange,this),s.on("noteSelected",this.onNoteSelected,this),s.on("noteUnSelected",this.onNoteUnSelected,this),u.d.on("change:include_current",function(){this.featureSupportView.get("showAll")||this.styleFromShown()},this)},onShownChange:function(){if(!this.featureSupportView.get("showAll"))switch(this.featureModel.get("viewMode")){case N.b.NORMAL:this.styleFromShown()}},onNoteSelected:function(e){var t=this.supportValue.noteNumbers.indexOf(e)>-1;h.a.toggleClass(this.el,this.HIGHLIGHT_CLASS,t)},onNoteUnSelected:function(e){this.supportValue.noteNumbers.indexOf(e)>-1&&this.el.classList.remove(this.HIGHLIGHT_CLASS)},getUsagePercentage:function(e){var t=this.versionModels;if(!t)return this.versionModel.usageDataById[e].percentage;for(var s=0,i=0;i<t.length;i++)s+=t[i].usageDataById[e].percentage;return s},makeElement:function(){var e=this,t=this.getEraClass(this.versionModel.era),s="stat-cell "+this.supportValue.supportClasses+" "+t,i=this.makeChildren();this.el=Object(c.k)("li",{class:s,"aria-describedby":"tooltip--"+this.featureModel.id,tabindex:"0"},i);var a=function(){e.featureModel.selectVersion(e)},n=function(){e.featureModel.unSelectVersion(e)};h.a.listen(this.el,"mouseover",a),h.a.listen(this.el,"focus",a),h.a.listen(this.el,"mouseout",n),h.a.listen(this.el,"blur",n)},addNumElement:function(e){var t=Object(c.k)("span",{class:"num-tag num-tag--"+e},e);this.noteListParent.appendChild(t)},getMainLabel:function(){return this.versionModel.shortVersion},makeChildren:function(){var e=this.supportValue,t=[this.getMainLabel()];if(e.noteNumbers.length&&(t.push(Object(c.k)("h5",{class:"note-header"}," See notes: ")),this.noteListParent=Object(c.k)("ul",{class:"note-list"}),t.push(this.noteListParent),e.noteNumbers.forEach(this.addNumElement,this)),e.isPrefixed){var s=Object(c.d)(this.versionModel.prefix,this.featureModel.id),i=Object(c.k)("code",{class:"cell-prefix"},s);t.push(i)}return t}}),_e=Oe.subclass({constructor:function(e){var t=e[0];this.versionModels=e.map(function(e){return e.versionModel}),this.versionModels.length>1&&(this.firstVersion=this.versionModels[0],this.lastVersion=this.versionModels[this.versionModels.length-1]),Oe.prototype.constructor.apply(this,[t.versionModel,t.supportValue,t.featureModel,t.featureSupportView])},remove:function(){h.a.remove(this.el)},styleFromShown:function(){h.a.show(this.el),this.isShown=!0,this.el.style.visibility="visible"},getMainLabel:function(){var e=this.firstVersion,t=this.lastVersion;return e?[e.getShortVersion(!0),t.getShortVersion(!1)].join(" - "):this.versionModel.getShortVersion(!1)}}),je=be.a.subclass({constructor:function(e){this.browserModel=e,this.viewsByVersion={},this.makeListElem(),this.makeVersionViews(),e.on("change:isShown",this.toggleDisplay,this),this.oldVersionCount=0},makeListElem:function(){this.listParent=Object(c.k)("ol"),this.cellFiller=Object(c.k)("div",{class:"cell-filler"});var e=Object(c.k)("h4",{class:"browser-heading  browser--"+this.browserModel.id},this.browserModel.name);this.headerEl=e;var t=N.c[this.browserModel.id];t&&(e.appendChild(Object(c.k)("a",{class:"browser-note-symbol",href:"#"},["*"])),e.classList.add("browser-has-notes"),h.a.listen(e,"click",function(e){e.preventDefault(),this.emit("toggleNotes",{browserId:this.browserModel.id,refEl:this.el,notes:t})}.bind(this)));var s="last-era-"+this.browserModel.lastEra;this.el=Object(c.k)("div",{class:"support-list "+s},[e,this.cellFiller,this.listParent])},updateHeaderText:function(e){var t=e<=4?this.browserModel.shortName:this.browserModel.name;this.headerEl.firstChild.textContent=t;var s=t!==this.browserModel.name;this.headerEl.title=s?this.browserModel.name:""},getBrowserDatePoints:function(){var e,t,s=1/0;for(var i in this.viewsByVersion){var a=this.viewsByVersion[i],n=a.versionModel.era;n<s&&(e=a.el,s=n),0===n&&(t=a.el)}return{top:parseInt(e.style.bottom),bottom:parseInt(t.style.bottom)}},makeDateLine:function(e){var t=this.cellFiller;t.style.bottom=e.bottom+30+"px",t.style.height=e.top-e.bottom+"px"},findShownNumNotes:function(e){var t=this.viewsByVersion,s=this.featureSupportView.get("showAll");for(var i in t){var a=t[i];if(a.isShown||s){var n=a.supportValue.noteNumbers;if(n.length)for(var r=0;r<n.length;r++)e[n[r]]=!0}}},toggleDisplay:function(e){h.a.toggle(this.el,e),this.isShown=e},toggleFixed:function(e){var t=this.headerEl.style;if(e){var s=this.headerEl.getBoundingClientRect(),i=this.headerEl.clientWidth;t.left=s.left+"px",t.width=i+"px",t.top="0px"}else t.left="",t.width=""},hideFiller:function(){this.cellFiller.style.height="0px"},updateFiller:function(e){var t,s=e-this.oldVersionCount;0===s?t=0:t=30*s+2*(s-1);this.cellFiller.style.height=t+"px"},getShownOldVersionCount:function(){if(!this.isShown)return this.oldVersionCount=0,0;var e=this.browserModel.versionArray,t=this.combinedVersions,s=0;if(t)for(var i=0;i<t.length;i++)t[i].versionModel.era<0&&s++;for(i=0;i<e.length;i++){var a=e[i],n=a.id,r=a.era,o=this.viewsByVersion[n].isShown;r<0&&o&&s++}return this.oldVersionCount=s,s},forceShowAll:function(e){if(this.toggleDisplay(!0),this.removeCombined(),e){for(var t,s,i,a=this.browserModel.versionArray,n=[],r=0;r<a.length;r++){0===(h=this.viewsByVersion[a[r].id]).versionModel.era?(i=h,t&&n.push(t),h.forceShow(),h.updateFromViewMode(),t=null,s=null):(h.supportValue!==s&&(s=h.supportValue,t&&n.push(t),t=[]),t.push(h),h.hide())}t&&n.push(t),this.combinedVersions=[];for(r=0;r<n.length;r++){var o=new _e(n[r]),l=o.versionModel.era;l<0?this.listParent.insertBefore(o.el,i.el):l>0&&this.listParent.appendChild(o.el),this.combinedVersions.push(o),o.updateFromViewMode()}}else{var u=this.viewsByVersion;for(var c in u){var h;(h=u[c]).forceShow(),h.updateFromViewMode()}}},removeCombined:function(){if(this.combinedVersions)for(var e=0;e<this.combinedVersions.length;e++)this.combinedVersions[e].remove();this.combinedVersions=[]},resetShown:function(){this.toggleDisplay(this.browserModel.get("isShown"));var e=this.viewsByVersion;for(var t in e){var s=e[t];s.resetShown(),s.featureModel&&s.updateFromViewMode()}this.removeCombined()}}),Be=Ce.subclass({constructor:function(e,t){this.el=null,this.versionModel=e,this.summaryModel=t,this.makeElement(),this.styleFromShown(e.get("isShown")),e.on("change:isShown",this.styleFromShown,this),e.on("usageDataChange",this.usageUpdated,this),t.on("change:viewMode",this.onViewModeChange,this),t.on("summaryChanged",this.updateElement,this),n.a.subscribe("accessible_colors",this.updateElement,this)},usageUpdated:function(){this.el.setAttribute("title",this.makeTooltip())},makeTooltip:function(){var e="";this.supportValue&&(e+="("+N.g[this.supportValue.supportLevel.letter]+")");var t=this.versionModel.usageDataById;for(var s in t){var i=t[s];e+="\r usage - "+i.name+": "+i.percentage+"%"}return e},updateElement:function(){var e=this.summaryModel,t=this.versionModel,s=t.browserModel.id;if(e.dataByBrowser[s]){var i=e.dataByBrowser[s][t.id]/u.f.shownCount,a=Math.round(100*i,0);this.el.setAttribute("style",this.makeStyle(i)),this.percEl.innerHTML=a}},makeStyle:function(e){var t,s,i;return r.b.accessible_colors.value?t=s=i=Math.round(150*e)+104:(e<=.5?(t=255,s=255*e*2):(t=-255*e+382.5,s=255),t=Math.round(t),s=Math.round(s),i=50),"background-color: rgb("+t+","+s+","+i+")"},makeElement:function(){var e="stat-cell stat-cell--summary "+this.getEraClass(this.versionModel.era),t=this.makeTooltip(),s=this.versionModel.id;s.indexOf("-")>-1&&(s=s.split("-")[1]),s+=": ",this.percEl=Object(c.k)("span",{class:"percentage"}),this.el=Object(c.k)("li",{class:e,title:t},[s,this.percEl,Object(c.k)("span",{class:"suffix"},"%")]),this.updateElement()}}),Le=je.subclass({constructor:function(e,t){this.summaryModel=t,je.prototype.constructor.apply(this,arguments)},makeVersionViews:function(){for(var e=this.browserModel.versionArray,t=(this.browserModel.id,this.viewsByVersion),s=0;s<e.length;s++){var i=e[s],a=new Be(i,this.summaryModel);this.listParent.appendChild(a.el),t[i.id]=a}}}),Ve=ke.subclass({constructor:function(e,t){this.summaryModel=e,this.browserListModel=t,this.browserSupportViewsById=null,this.supportEl=null,this.el=Object(c.k)("div",{class:"support-container"}),this.makeBrowserListViews(),this.browserListModel.on("shownChange",this.handleShownChange,this),this.handleShownChange(),n.a.subscribe("optionsToggled",this.handleCellSizeChange,this),h.a.listen(window,"resize",this.handleCellSizeChange,this),n.a.subscribe("scroll",this.handleScroll,this),n.a.subscribe("pageSectionDisplayed",function(e){e===N.a.TABLES&&this.handleCellSizeChange()},this)},handleScroll:function(e){},handleShownChange:function(){var e,t,s=this.browserSupportViewsById,i=0;for(e in s)t=s[e],i=Math.max(i,t.getShownOldVersionCount());for(e in s)(t=s[e]).updateFiller(i)},makeBrowserListViews:function(){var e=this.browserListModel.browsersById;for(var t in this.browserSupportViewsById={},e){var s=e[t],i=new Le(s,this.summaryModel);this.browserSupportViewsById[t]=i,this.el.appendChild(i.el)}}}),xe=be.a.subclass({constructor:function(e,t){this.el=Object(c.k)("article",{class:"feature-block  feature-block--feature"}),this.makeHeading(),this.makeSupportEl(e,t)},makeHeading:function(){var e=Object(c.k)("h3",{class:"feature-title"},"Summary"),t=Object(c.k)("p",{class:"feature-description"},"Calculation of support for currently selected criteria");this.el.appendChild(e),this.el.appendChild(t)},makeSupportEl:function(e,t){this.summaryTableView=new Ve(e,t);var s=Object(c.k)("div",{class:"support-container-wrap "+N.b.NORMAL});s.appendChild(this.summaryTableView.el),this.el.appendChild(s)}}),Ie=function(e){var t=c.k;this.tabContainer=t("div",{class:"feature-tab-container"},[t("ul")]),this.panelContainer=t("div",{class:"feature-panel-container"}),this.haveFirst=!1;var s=t("div",null,["Loading..."]);e.appendChild(this.tabContainer),e.appendChild(this.panelContainer),this.panelSets={},this.add=function(e,i,a,n){if(this.panelSets[e])throw new Error("Panel already defined");var r=this,o=t("li",{class:"feature-tab"},[i]),l=t("div",{class:"hidden"},[a]);h.a.listen(o,"click",function(){r.showPanel(e),!a.firstChild&&n&&(a.appendChild(s),Object(c.a)(n.url,{success:function(e){h.a.empty(a);var t=JSON.parse(e);n.success.call(r,t)},error:n.error}))}),this.panelSets[e]={tab:o,panel:l},this.tabContainer.firstChild.appendChild(o),this.panelContainer.appendChild(l),r.haveFirst||(r.showPanel(e),r.haveFirst=!0)},this.addLink=function(e,s){var i=t("a",{href:s,target:"_blank",class:"feature-tab-link"},e);this.tabContainer.appendChild(i)},this.showPanel=function(e){for(var t in this.panelSets){var s=this.panelSets[t];t===e?(h.a.show(s.panel),s.tab.classList.add("active")):(h.a.hide(s.panel),s.tab.classList.remove("active"))}}},Te=be.a.subclass({constructor:function(e){this.model=e,this.featureModel=e.featureModel,this.allUsageShown=!1,this.elMap={},this.MIN_VISIBLE=4,this.usageSetParent=null,this.makeEl(),e.on("featureUsageAdded",function(e){var t={};t[e.id]=e,this.makeUsageSets(t),this.updateVisibility()},this),e.on("featureUsageRemoved",function(e){var t=this.elMap[e.id];delete this.elMap[e.id],h.a.remove(t),this.updateVisibility()},this),u.g.on("change:primaryUsage",this.setPrimaryUsage,this),n.a.subscribe("browserSetsChanged",function(){this.updateOptions()}.bind(this))},setPrimaryUsage:function(e){e=e||r.b.primary_usage.value;for(var t=this.elMap[e],s=t.length-1;s>=0;s--)h.a.prepend(this.usageSetParent,t[s]);this.updateVisibility()},updateVisibility:function(){for(var e=this.usageSetParent.childNodes,t=this.allUsageShown,s=0;s<e.length;s++){var i=e[s];t||s<this.MIN_VISIBLE?h.a.show(i):h.a.hide(i)}},makeUsageEl:function(e,t,s){var i=e.shortName||e.name;this.featureModel.hasPrefixes,"unprefixed"==t&&(i=t+":");var a,n=e[t],r=Object(c.m)(n.y),o=Object(c.m)(n.a),l=Object(c.m)(n.a+n.y);"all"===this.model.maxId&&(a=u.g.getUsageById(s).unknownPerc)&&(a=Object(c.m)(a));var h=r+"% Supported",d=l+"% Total";if(a){var p=" ("+a+"% untracked browsers)";o>0?d+=p:h+=p}var f=[Object(c.k)("h4",null,[Object(c.k)("span",{class:"usage-title"},i)]),Object(c.k)("span",{class:"support",title:h},r+"%")];o>0&&(f.push(Object(c.k)("span",null," + ")),f.push(Object(c.k)("span",{class:"partial",title:"Partially Supported"},o+"%")),f.push(Object(c.k)("span",null," = ")),f.push(Object(c.k)("span",{class:"total",title:d},l+"%")));var b=Object(c.k)("li",{class:"support-stats","data-usage-id":s},f);return"unprefixed"==t&&b.classList.add("support-stats--unprefixed"),b},makeUsageSets:function(e){var t=this.usageSetParent,s=["all"];for(var i in this.featureModel.hasPrefixes&&s.push("unprefixed"),e){var a=e[i];if(a)for(var n=this.elMap[i]=[],r=0;r<s.length;r++){var o=s[r],l=this.makeUsageEl(a,o,i);n.push(l),t.appendChild(l)}}this.setPrimaryUsage()},handleMaxListChange:function(e){var t=e.target.value;this.model.setMax(t),h.a.empty(this.usageSetParent),this.makeUsageSets(this.model.usageSetsById)},updateOptions:function(){var e=[Object(c.k)("option",{value:"all"},"all users"),Object(c.k)("option",{value:"tracked"},"all tracked"),Object(c.k)("option",{value:"tracked|desktop"},"tracked desktop"),Object(c.k)("option",{value:"tracked|mobile"},"tracked mobile")];o.a.forEach(function(t){e.push(Object(c.k)("option",{value:"browserset|"+t.name},t.name))}),h.a.empty(this.usageMaxList),e.forEach(function(e){this.usageMaxList.appendChild(e)}.bind(this))},_makeUsageInfoButton:function(e){var t=!1,s=Object(c.k)("div",{class:"feat-usage-info"},[],{click:function(){h.a.remove(s),t=!t}});return s.innerHTML='\t\t\t<button class="info-note-close">✕</button>\t\t\t<h4>Usage % values explained</h4>\t\t\t<dl>\t\t\t\t<dt>All users</dt>\t\t\t\t<dd>Values will be lower due to browsers <u>not tracked</u> on caniuse.</dd>\t\t\t\t<dt>All tracked</dt>\t\t\t\t<dd>Only considers the browsers that are tracked on caniuse.</dd>\t\t\t\t<dt>Tracked desktop</dt>\t\t\t\t<dd>Only considers tracked desktop browsers.</dd>\t\t\t\t<dt>Tracked mobile</dt>\t\t\t\t<dd>Only considers tracked mobile browsers.</dd>\t\t\t</dl>',h.a.listen(Object(c.g)(".js-score-notes-close-btn"),"click",function(){h.a.remove(s)}),Object(c.k)("button",{class:"ciu-button  feat-usage-info-btn"},"?",{click:function(){(t=!t)?this.el.appendChild(s):h.a.remove(s)}.bind(this)})},makeEl:function(){this.el=Object(c.k)("aside",{class:"usage-container"}),this.usageMaxList=Object(c.k)("select",{},[],{change:this.handleMaxListChange.bind(this),input:this.handleMaxListChange.bind(this)});var e=Object(c.k)("div",{class:"select"},[this.usageMaxList]);this.updateOptions();var t=this._makeUsageInfoButton();this.usageHeader=Object(c.k)("header",{class:"usage-header"},["Usage",Object(c.k)("label",{},["% of ",e,t])]),this.el.appendChild(this.usageHeader),this.usageSetParent=Object(c.k)("ul"),this.el.appendChild(this.usageSetParent),this.makeUsageSets(this.model.usageSetsById),this.updateVisibility(),this.addShowButton()},addShowButton:function(){var e=this,t=this.usageSetParent.childNodes;if(t.length>this.MIN_VISIBLE){var s=Object(c.k)("button",{class:"ciu-button ciu-button--small show-more-usage"},"show more...",{click:function(){for(var i=0;i<t.length;i++)h.a.show(t[i]);h.a.remove(s),e.allUsageShown=!0}});this.el.appendChild(s)}}}),Me=je.subclass({constructor:function(e,t,s){this.featureModel=t,this.featureSupportView=s,je.prototype.constructor.apply(this,arguments)},toggleDisplay:function(e){!e&&this.featureSupportView.get("showAll")||(h.a.toggle(this.el,e),this.isShown=e)},makeVersionViews:function(){for(var e=this.browserModel.versionArray,t=this.featureModel.supportDataByBrowser,s=this.browserModel.id,i=this.viewsByVersion,a=0;a<e.length;a++){var n=e[a],r=n.id,o=t[s][r];if(o){var l=o.supportValue,u=new Oe(n,l,this.featureModel,this.featureSupportView);this.listParent.appendChild(u.el),i[r]=u}else console.log("missing support data for browser: "+s+" "+r+", feat: "+this.id)}}}),Ae=be.a.subclass({constructor:function(e){this.featureSupportView=e,this.featureModel=e.featureModel,this.el=Object(c.k)("div",{class:"support-tooltip",role:"tooltip",id:"tooltip--"+this.featureModel.id,"aria-hidden":"true"})},_makeSupportSection:function(){var e=this.versionSupportView.supportValue,t=e.text;if(e.isDisabled&&(e.text="Not supported by default, but can be enabled"),e.isPrefixed){var s=this.featureSupportView.getPrefix(this.versionSupportView),i=" with prefix: ";e.isDisabled&&(i=". Requires prefix: "),t=[e.text,i,Object(c.k)("code",{class:"prefix"},s)]}var a=Object(c.k)("p",{class:"tooltip-info"},t),n=Object(c.k)("div",{class:"tooltip__support"},[Object(c.k)("h6",{class:"tooltip__section-heading"},"Support info")]);n.appendChild(a);var r=this.featureModel.sourceData.notes_by_num;if(e.noteNumbers.length){n.appendChild(Object(c.k)("h5",{class:"tooltip-subheading"},"Notes"));for(var o=Object(c.k)("ul",{class:"tooltip-list"}),l=0;l<e.noteNumbers.length;l++){var u=e.noteNumbers[l],d=r[u],p=Object(c.k)("li",{class:"tooltip-note"});p.innerHTML=Object(c.l)(d);var f=Object(c.k)("span",{class:"num-tag num-tag--"+u},u);h.a.prepend(p,f),o.appendChild(p)}n.appendChild(o)}return n},_makeBrowserSection:function(){var e=this.versionSupportView.versionModel,t=this.versionSupportView.versionModels,s=e.getPrettyReleaseDate();if(this.versionSupportView.lastVersion){var i=this.versionSupportView.lastVersion.getPrettyReleaseDate();i&&(s+=" - "+i)}var a=Object(c.k)("div",{class:"tooltip__browser"},[Object(c.k)("h6",{class:"tooltip__section-heading"},"Browser version")]);s&&a.appendChild(Object(c.k)("p",{class:"tooltip-info"},"Released "+s)),a.appendChild(Object(c.k)("h5",{class:"tooltip-subheading"},t?"Total usage":"Usage"));var n=r.b.primary_usage.value,o=Object(c.k)("dl",{class:"tooltip-usage"}),l=e.usageDataById;for(var u in l){var h=l[u],d=this.versionSupportView.getUsagePercentage(u);d=Math.round(100*d,0)/100;var p=null;u==n&&(p={class:"tooltip-primary-usage"}),o.appendChild(Object(c.k)("dt",p,h.name+": ")),o.appendChild(Object(c.k)("dd",p,d+"%"))}return a.appendChild(o),a},render:function(e){this.versionSupportView=e;e.el;var t=e.versionModel,s=e.supportValue;this.el.className="support-tooltip",h.a.empty(this.el);var i=Object(c.k)(),a=t.getName();e.lastVersion&&(a+=" - "+e.lastVersion.getName()),i.appendChild(Object(c.k)("h4",{class:"tooltip-heading"},a));var n=this._makeSupportSection(),r=this._makeBrowserSection();i.appendChild(Object(c.k)("div",{class:"tooltip__columns"},[n,Object(c.k)("hr",{class:"tooltip__separator"}),r])),this.el.appendChild(i),this.el.classList.add(s.supportLevel.letter)},updatePosition:function(e){for(var t=0,s=0,i=e,a=e.offsetHeight,n=e.offsetWidth,r=this.el,o=this.featureSupportView.el.parentNode,l=r.offsetWidth,u=r.offsetHeight,c=o.scrollTop,h=o.scrollLeft;i!=o;)t+=i.offsetLeft,s+=i.offsetTop,i=i.parentNode;s-=c,t+=n+3-h,r.style.borderLeftWidth="",r.style.borderRightWidth="",t+l>i.offsetWidth?(t-=l+n+6-1,e.classList.add("selected--left"),r.classList.add("support-tooltip--left"),r.classList.remove("support-tooltip--right")):(e.classList.add("selected--right"),r.style.borderLeftWidth=0,r.classList.remove("support-tooltip--left"),r.classList.add("support-tooltip--right")),s+=a/2,s-=u/2,r.style.left=t+"px",r.style.top=s+"px",r.setAttribute("aria-hidden","false")}}),Ee=ke.subclass({constructor:function(e,t,s){this.featureModel=e,this.featureListModel=t,this.featureView=s,this.el=Object(c.k)("div",{class:"support-container"}),this.browserListModel=t.browserListModel,this.makeBrowserListViews(),this.makeTooltip(),this.makeBrowserNotesElement(),this.currentViewMode=this.featureModel.get("viewMode"),this.handleShownChange(),e.on("change:viewMode",this.setViewMode,this),e.on("versionSelected",this.handleVersionSelection,this),e.on("versionUnSelected",this.handleVersionUnSelection,this),t.on("change:shownAgents",this.updateShownAgents,this),this.browserListModel.on("shownChange",this.handleShownChange,this),n.a.subscribe("optionsToggled",this.handleCellSizeChange,this),t.on("heightChange",this.handleHeightChange,this),h.a.listen(window,"resize",this.handleCellSizeChange,this),n.a.subscribe("pageSectionDisplayed",function(e){e===N.a.TABLES&&this.handleCellSizeChange()},this),n.a.subscribe("escapeKey",function(){this.hideBrowserNotes()},this),s.on("change:isGenerated",function(){this.handleCellSizeChange()},this),n.a.subscribe("scroll",this.handleScroll,this)},handleInnerScroll:function(){},handleScroll:function(e){this.featureView.isDisplayed&&this.currentViewMode===N.b.NORMAL&&(this.scrollY=window.pageYOffset,this.positionHeader())},setDateRelativeHeight:function(){var e=0;for(var t in this.browserSupportViewsById){var s=this.browserSupportViewsById[t],i=s.getBrowserDatePoints();i.top>e&&(e=i.top),s.makeDateLine(i)}this.el.style.height=e+50+"px",this.el.parentNode&&(this.el.parentNode.scrollTop=99999)},handleHeightChange:function(){this.getVisibleCurrentCell()&&(this.updateHeaderPosition(),this.positionHeader(!0))},getHeaderHeight:function(){for(var e in this.browserSupportViewsById){var t=this.browserSupportViewsById[e];if(t.isShown)return t.headerEl.clientHeight}},setViewMode:function(e){this.el.parentNode.classList.remove(this.currentViewMode),this.el.parentNode.classList.add(e),this.currentViewMode=e,this.handleShownChange(),e===N.b.DATE_RELATIVE?this.setDateRelativeHeight():this.el.style.height="",this.get("showAll")?this.forceShowAll():this.resetShown()},forceShowAll:function(){this.minWidth=80,this.set("showAll",!0);var e=this.browserSupportViewsById,t=this.currentViewMode!==N.b.DATE_RELATIVE;for(var s in e)e[s].forceShowAll(t);this.handleShownChange(),this.handleCellSizeChange()},getVisibleCurrentCell:function(){for(var e=Object(c.h)(".current",this.el),t=0;t<e.length;t++){if(e[t].clientWidth>0)return e[t]}return null},getSentinel:function(){var e=this.getVisibleCurrentCell();return e?{el:e,width:e.clientWidth}:null},handleCellSizeChange:function(){var e=this.el,t=this.getSentinel();if(t){for(var s=e.classList,i=0;i<s.length;i++){var a=s[i];0===a.indexOf("cell-size-")&&s.remove(a)}var n="cell-size-"+Math.ceil(t.width/16);this._setMinWidth(),s.add(n),this.positionBrowserNotes(),this.currentViewMode===N.b.NORMAL&&(this.updateHeaderPosition(),this.positionHeader(!0))}},resetShown:function(){this.minWidth=50,this.set("showAll",!1);var e=this.browserSupportViewsById;for(var t in e)e[t].resetShown();this.handleShownChange(),this.handleCellSizeChange()},toggleShowButton:function(e){if(this.featureView.showAllControlContainer)for(var t=this.featureView.showAllControlContainer.querySelectorAll("button"),s=0;s<t.length;s++){var i=t[s],a="1"==i.getAttribute("data-show-all")?e:!e;i.classList.toggle("selected",a)}},handleShownChange:function(e){if("browserSetChange"===e&&!r.b.primary_browserset.matchesDefault()&&"1"!==r.b.default_showmode.value||"usageChange"===e&&!r.b.usage_threshold.matchesDefault()||"shownBrowserChange"===e&&!r.b.agents.matchesDefault())this.resetShown();else{var t=this.browserSupportViewsById,s=this.currentViewMode===N.b.NORMAL,i=this.currentViewMode===N.b.USAGE_RELATIVE,a=i,n=!0===this.get("showAll");this.toggleShowButton(n);var o,l,u=0,c={};for(o in t)(l=t[o]).isShown&&l.findShownNumNotes(c),a?t[o].hideFiller():u=Math.max(u,l.getShownOldVersionCount());if(!a)for(o in t)(l=t[o]).updateFiller(u);s&&(this.handleCellSizeChange(),this.hideBrowserNotes()),s||i?this.featureListModel.emit("heightChange"):this.setDateRelativeHeight(),this.updateNotesToShow(c)}},updateNotesToShow:function(e){var t=Object.keys(e);this.featureView.updateNotesToShow(t)},handleVersionSelection:function(e){this.tooltipTimer&&(clearTimeout(this.tooltipTimer),this.tooltipTimer=null),this.tooltip.render(e),this.el.parentNode.appendChild(this.tooltip.el),this.tooltip.updatePosition(e.el)},getPrefix:function(e){var t,s=e.versionModel.prefix;switch(s=Object(c.d)(s,e.featureModel.id),e.featureModel.prefixType){case"js-lower":t=s;break;case"css":t="-"+s+"-";break;case"js-upper":t=(t=s.substr(0,1).toUpperCase()+s.substr(1)).replace("Webkit","WebKit");break;default:t=s}return t},handleVersionUnSelection:function(e){e.el.classList.remove("selected--left"),e.el.classList.remove("selected--right"),this.startTooltipHide()},startTooltipHide:function(){var e=this.tooltip;this.tooltipTimer=setTimeout(function(){h.a.remove(e.el)},100),e.el.setAttribute("aria-hidden","true")},makeBrowserListViews:function(){var e=this.browserListModel.browsersById;for(var t in this.browserSupportViewsById={},e){var s=e[t],i=new Me(s,this.featureModel,this);i.on("toggleNotes",this.toggleBrowserNotes,this),this.browserSupportViewsById[t]=i,this.el.appendChild(i.el)}},toggleBrowserNotes:function(e){this.browserNotesState&&this.browserNotesState===e.browserId?this.hideBrowserNotes():this.showBrowserNotes(e)},makeTooltip:function(){this.tooltip=new Ae(this)},makeBrowserNotesElement:function(){this.browserNotesEl=Object(c.k)("div",{class:"browser-notes  hidden",role:"tooltip","aria-hidden":"true"})},hideBrowserNotes:function(){h.a.remove(this.browserNotesEl),this.lastRefEl=null,this.browserNotesState=null},showBrowserNotes:function(e){this.browserNotesState=e.browserId;var t=e.refEl;this.lastRefEl=t;e.notes;var s=Object(c.k)("button",{class:"browser-note-close"},["✕"],{click:this.hideBrowserNotes.bind(this)});this.el.appendChild(this.browserNotesEl),h.a.empty(this.browserNotesEl),h.a.show(this.browserNotesEl);var i=Object(c.k)("div");i.innerHTML='<span class="browser-note-symbol">*</span>'+Object(c.l)(e.notes),h.a.append(this.browserNotesEl,[s,i]),this.positionBrowserNotes(t)},positionBrowserNotes:function(e){if(e=e||this.lastRefEl,this.browserNotesEl.parentNode){var t=e.firstChild,s=e.offsetTop,i=e.offsetLeft,a=this.browserNotesEl.style,n=t.offsetTop+t.offsetHeight,r=getComputedStyle(t).borderBottomColor;this.browserNotesEl.style.borderColor=r;var o=this.browserNotesEl.offsetWidth,l=i+e.offsetWidth/2,u=o/2,c=Math.max(0,l-u),h=this.el,d=h.offsetLeft+h.offsetWidth-(c+o);d<0&&(c+=d),a.top=n+s+"px",a.left=c+"px"}},updateShownAgents:function(){this.handleCellSizeChange()}}),De=function(e){return Object(c.k)("p",null,[Object(c.k)("span",{class:"note"},e)])},Fe=be.a.subclass({constructor:function(e,t){this.model=e,this.listView=t,this.set("isGenerated",!1),this.isDisplayed=!1,this.usageContainer=null,this.supportView=null,this.noteNumberElementsByVersions=null,this.el=Object(c.k)("article",{class:"feature-block  feature-block--feature  is-loading"}),this.HIGHLIGHT_CLASS="highlight",e.on("versionSelected",this.handleVersionSelection,this),e.on("versionUnSelected",this.handleVersionUnSelection,this),e.on("loaded",this.handleLoaded,this),n.a.subscribe("scroll",this.handleScroll,this)},handleLoaded:function(){this.isDisplayed&&this.isInView()&&this.renderContents()},handleScroll:function(){this.isDisplayed&&this.model.isLoaded()&&!this.get("isGenerated")&&this.isInView()&&this.renderContents()},isInView:function(){var e=document.documentElement.scrollTop,t=this.el.offsetTop-e,s=t+this.el.offsetHeight;return t<window.innerHeight&&s>0},renderContents:function(){h.a.empty(this.el),this.makeHeading(),this.makeUsageViewSets(),this.supportViewControlEl=Object(c.k)("div",{class:"support-view-control"}),this.el.appendChild(this.supportViewControlEl),this.makeViewModeControl(),this.makeShowAllControl(),this.makeInfoButton(),this.makeSupportView(),this.makeTabs(),this.el.classList.remove("is-loading"),this.set("isGenerated",!0)},render:function(e){this.isDisplayed=!0,this.model.isLoaded()?this.get("isGenerated")||this.renderContents():(n.a.publish("featureDataNeeded",this.model.id),this.get("hasPlaceholder")||this.makeLoadingHeading()),e.appendChild(this.el)},destroy:function(){this.isDisplayed=!1},makePermalink:function(){var e=Object(c.k)("a",{href:"#feat="+this.model.id,title:"Link to just this feature",class:"feature__permalink-symbol"},"#");this.el.appendChild(e)},makeLoadingHeading:function(){this.makePermalink();var e=Object(c.k)("div",{class:"feature-heading"},[Object(c.k)("h3",{class:"feature-title"},this.model.title)]);this.el.appendChild(e),this.el.appendChild(Object(c.k)("div",{class:"placeholder-block"})),this.el.appendChild(Object(c.k)("div",{class:"placeholder-block"})),this.set("hasPlaceholder",!0)},makeHeading:function(){var e;this.makePermalink();var t=this.model.sourceData,s=c.k,i=s("p",{class:"feature-description"});i.innerHTML=Object(c.l)(t.description),e=s("div",{class:"feature-heading"},[s("h3",{class:"feature-title"},t.title),s("a",{href:t.spec,class:"specification "+t.status},[s("i",{class:"icon icon-spec"})," - "+t.status.toUpperCase()]),i]),this.el.appendChild(e)},makeUsageViewSets:function(){this.usageView=new Te(this.model.featureUsageModel),this.el.appendChild(this.usageView.el)},updateNotesToShow:function(e){if(this.noteElementsByNumber)for(var t in this.noteElementsByNumber){var s=this.noteElementsByNumber[t],i=e.indexOf(t)>-1;h.a.toggleClass(s,"note-not-applicable",!i)}else this._notesToShow=e},updateUsageOrder:function(){if(this.usageContainer){var e,t=r.b.primary_usage.value,s=this.usageContainer.querySelector("ul"),i=s.childNodes,a=[];for(this.allUsageShown||h.a.hide(i[0]),e=0;e<i.length;e++){var n=i[e];n.getAttribute("data-usage-id")==t&&a.push(n)}if(!a.length){var o=this.model.usageSetsById[t],l=["all"];for(this.model.hasPrefixes&&l.push("unprefixed"),e=0;e<l.length;e++){var u=l[e];a.push(this.makeUsageView(o,u,t))}}for(e=0;e<a.length;e++){var c=a[e];s.insertBefore(c,s.firstChild),h.a.show(c)}}},makeViewModeControl:function(){var e,t=this,s=function(s){var i=s.target.getAttribute("data-view-mode");t.model.set("viewMode",i);for(var a=0;a<e.length;a++){var n=e[a];n==s.target?n.classList.add("selected"):n.classList.remove("selected")}}.bind(this),i=Object(c.k)("div",{class:"view-mode-control"},[Object(c.k)("button",{class:"view-mode-button selected","data-view-mode":N.b.NORMAL,title:'View mode: Aligned to "current" browsers'},"Current aligned",{click:s}),Object(c.k)("button",{class:"view-mode-button","data-view-mode":N.b.USAGE_RELATIVE,title:"View mode: Usage relative"},"Usage relative",{click:s}),Object(c.k)("button",{class:"view-mode-button","data-view-mode":N.b.DATE_RELATIVE,title:"View mode: Date relative"},"Date relative",{click:s})]);e=i.childNodes,this.viewModeControlContainer=i,this.supportViewControlEl.appendChild(i),this.toggleViewModeButton(this.model.get("viewMode"))},toggleViewModeButton:function(e){if(this.viewModeControlContainer)for(var t=this.viewModeControlContainer.querySelectorAll("button"),s=0;s<t.length;s++){var i=t[s],a=i.getAttribute("data-view-mode")==e;i.classList.toggle("selected",a)}},handleViewModeChange:function(e){e===N.b.USAGE_RELATIVE&&r.b.primary_browserset.value.length},makeShowAllControl:function(){var e,t=function(t){!!+t.target.getAttribute("data-show-all")?this.showAllForFeat():this.supportView.resetShown();for(var s=0;s<e.length;s++){var i=e[s];i==t.target?i.classList.add("selected"):i.classList.remove("selected")}}.bind(this),s=Object(c.k)("button",{class:"ciu-button  show-all-versions-button","data-show-all":"0",title:"Apply filters specified in Settings"},"Apply filters",{click:t}),i=Object(c.k)("button",{class:"ciu-button  show-all-versions-button","data-show-all":"1",title:"Show all data for this feature"},"Show all",{click:t}),a=Object(c.k)("div",{class:"show-all-control"},[s,i]);this.get("showAll")?i.classList.add("showing"):s.classList.add("showing"),e=a.childNodes,this.showAllControlContainer=a,this.supportViewControlEl.appendChild(a)},makeInfoButton:function(){var e=!1,t=Object(c.k)("div",{class:"feat-table-info"},[],{click:function(){h.a.remove(t),e=!e}});t.innerHTML='            <button class="info-note-close">✕</button>            <h4>View options explained</h4>            <dl>                <dt>Current aligned</dt>                <dd>The current version of each browser is aligned in the same row.</dd>                <dt>Usage relative</dt>                <dd>The height of each set of browser versions is based on browser usage.</dd>                <dt>Date relative</dt>                <dd>Each version appears in a timeline based on when it was released.</dd>            </dl>            <dl>                <dt>Apply filters</dt>                <dd>Displays a custom set of browsers and versions. By default only versions with 0.5% usage or greater are shown. To change this value or customize what\'s shown, see the <span class="settings-btn  js-settings-toggle">Settings</span> sidepanel</dd>                <dt>Show all</dt>                <dd>All tracked browser versions are shown. Multiple versions are combined into a single block when support is the same.</dd>            </dl>';var s=t.querySelector(".js-settings-toggle");h.a.listen(s,"click",function(){L.showSidebar()}),h.a.listen(Object(c.g)(".js-score-notes-close-btn"),"click",function(){h.a.remove(t)});var i=this.supportViewControlEl,a=Object(c.k)("button",{class:"ciu-button  feat-table-info-btn"},"?",{click:function(){if(e=!e){i.appendChild(t);var s=a.offsetLeft;t.offsetWidth/2+s>window.innerWidth&&(s=t.offsetWidth/2),t.style.left=s+"px"}else h.a.remove(t)}});i.appendChild(a)},showAllForFeat:function(){this.supportView.forceShowAll()},makeSupportView:function(){this.supportView=new Ee(this.model,u.d,this);var e=Object(c.k)("div",{class:"support-container-wrap"},null,{scroll:this.supportView.handleInnerScroll.bind(this.supportView)});e.appendChild(this.supportView.el),this.el.appendChild(e),this.supportView.setViewMode(this.model.get("viewMode")),"1"===r.b.default_showmode.value&&this.supportView.forceShowAll()},selectNote:function(){},toggleNoteHighlight:function(e,t){for(var s=0;s<e.length;s++){var i=e[s],a=this.noteElementsByNumber[i];h.a.toggleClass(a,this.HIGHLIGHT_CLASS,t)}},handleVersionSelection:function(e){this.toggleNoteHighlight(e.supportValue.noteNumbers,!0)},handleVersionUnSelection:function(e){this.toggleNoteHighlight(e.supportValue.noteNumbers,!1)},makeLinksPanel:function(e){var t=this.model.sourceData,s=Object(c.k)("div"),i=t.link_count+1;e.add("links","Resources ("+i+")",s,{url:"/process/get_feat_data.php?feat="+this.model.id+"&type=links",success:function(e){if(e){for(var t=Object(c.k)("ul"),i=0;i<e.length;i++){for(var a=e[i],n=(Object(c.k)("a",{href:a.url},a.title),[Object(c.k)("a",{href:a.url},a.title)," ["+a.url_host+"] "]),r=0;r<a.tags.length;r++){var o=Object(c.k)("span",{class:"linktag"},a.tags[r]);n.push(o)}var l=Object(c.k)("li",{class:"feature-link-item"},n);t.appendChild(l)}s.appendChild(t)}else s.appendChild(De("No known resources"))}})},addNumberedNoteEl:function(e,t,s,i){if(t[e]){var a=this,n=Object(c.l)(t[e]),r=Object(c.k)("p",{class:"num-note"});r.innerHTML='<span class="num-tag  num-tag--'+e+'">'+e+"</span> "+n;var o=function(e){return function(t){a.model.selectNote(e)}}(e),l=function(e){return function(t){a.model.unSelectNote(e)}}(e);h.a.listen(r,"mouseover",o),h.a.listen(r,"mousedown",o),h.a.listen(r,"mouseout",l),h.a.listen(r,"mouseup",l),this.noteElementsByNumber[e]=r,i.appendChild(r)}else console.error("Missing note for #"+e+' on feature "'+this.model.id+'"')},makeNotesPanel:function(e){var t=this.model.sourceData,s=Object(c.k)("div");this.noteElementsByNumber={};var i=this.model.versionsByNoteNumber;if(i){var a=t.notes_by_num;for(var n in i)this.addNumberedNoteEl(n,a,i[n],s)}var r=t.notes;if(r){var o=Object(c.k)("div");o.innerHTML=Object(c.l)(r),s.insertBefore(o,s.firstChild)}s.firstChild||s.appendChild(De("No notes")),e.add("notes","Notes",s),this.updateNotesToShow(this._notesToShow)},makeSubFeaturesPanel:function(e){var t=this.model.sourceData,s=Object(c.k)("div"),i=t.children;if(i&&i.length){for(var a=this.model.featureListModel.featuresById,n=Object(c.k)("ul"),r=0;r<i.length;r++){var o=i[r],l=a[o];if(l){var u=l.sourceData.title,h=Object(c.k)("a",{href:"#feat="+o},u),d=Object(c.k)("li",{class:"feature-subfeature"},[h]);n.appendChild(d)}}s.appendChild(n),e.add("subfeatures","Sub-features ("+i.length+")",s)}},makeBugsPanel:function(e){var t,s=this.model.sourceData,i=Object(c.k)("div"),a=s.bug_count,n=function(){var e=Object(c.k)("p",null,"Error retrieving data");i.appendChild(e)};0===a?(t=null,i.appendChild(De("No known issues"))):t={url:"/process/get_feat_data.php?feat="+this.model.id+"&type=bugs",success:function(e){if(e){for(var t=Object(c.k)("ol"),s=0;s<e.length;s++){var a=Object(c.k)("li",{class:"feature-bug-item"});a.innerHTML=Object(c.l)(e[s].description),t.appendChild(a)}i.appendChild(t)}else n()},error:n},e.add("bugs","Known issues ("+a+")",i,t)},makeFeedbackForm:function(e){var t=this,s="https://github.com/Fyrd/caniuse/blob/master/features-json/"+this.model.id+".json",i=Object(c.k)("a",{href:s},"edit this data on GitHub"),a=Object(c.k)("textarea",{class:"feature__feedback-textarea",name:"comment",required:"required"}),n=Object(c.k)("form",null,[Object(c.k)("p",null,["Send your comments, corrections, etc. If you have a question you'd like answered, please include an email address. Or, ",i]),a,Object(c.k)("input",{type:"submit",class:"ciu-button",value:"Submit"})]);h.a.listen(n,"submit",function(e){e.preventDefault();var s=a.value,i="comment="+s+"&feat_id="+t.model.id;if(0===s.trim().length)return window.alert("Please enter a comment in the text field"),void a.focus();var n=Object(c.k)("p",{role:"alert"},"Submitting your feedback...");h.a.insertAfter(n,a),Object(c.a)("/process/feat_comment.php",{method:"POST",data:i,success:function(e){1==e?(n.innerHTML="Feedback sent!",a.value="",setTimeout(function(){h.a.remove(n)},5e3)):n.innerHTML='Unable to send feedback. Try <a href="http://a.deveria.com/contact">this form</a> instead?'}})}),e.add("feedback","Feedback",n)},makeTabs:function(){var e=new Ie(this.el);this.makeNotesPanel(e),this.makeSubFeaturesPanel(e),this.makeBugsPanel(e),this.makeLinksPanel(e),this.makeFeedbackForm(e)},installTo:function(){}}),Ne=(ge=null,ve={pubdate:function(e,t){return e.model.sourceData.pubDate<t.model.sourceData.pubDate?1:-1},score:function(e,t){return e.model.supportScoreIndex>t.model.supportScoreIndex?1:-1},rscore:function(e,t){return e.model.supportScoreIndex<t.model.supportScoreIndex?1:-1},alpha:function(e,t){return e.model.sourceData.title.toLowerCase()>t.model.sourceData.title.toLowerCase()?1:-1},ralpha:function(e,t){return e.model.sourceData.title.toLowerCase()>t.model.sourceData.title.toLowerCase()?-1:1},search:function(e,t){var s=e.model.sourceData.title,i=t.model.sourceData.title,a=s.toLowerCase(),n=i.toLowerCase(),r=a.indexOf(ge),o=n.indexOf(ge);return r>-1&&o>-1?r===o?s<i?-1:1:r<o?-1:1:r>-1?-1:1}},be.a.subclass({constructor:function(e,t){this.featureViewsById={},this.featureViewList=[],this.overflowViews=[],this.summaryView=t,this.model=e,this.nextLeftElem=null,this.totalLeftElem=null,this.el=Object(c.k)(null);var s=e.featuresById;for(var i in s){var a=s[i],n=new Fe(a,this);this.featureViewsById[i]=n,this.featureViewList.push(n)}e.on("listChanged",this.updateList,this),e.on("change:sortOrder",this.updateList,this)},installTo:function(e){e.appendChild(this.el),this.el=e},sortList:function(){var e,t=r.b.feature_sort.value,s=this.featureViewList,i=this.model.get("currentFilter");ge=this.model.get("search").toLowerCase(),e="search"===i&&ge.length>0?ve.search:ve[t],s.sort(e)},addEcmaFeatures:function(){for(var e=this.model.ecmaResults,t=this.el,s=0;s<e.length;s++){var i=e[s],a=Object(c.k)("div",{class:"feature-block  feature-block--ecma"},["See support for ",Object(c.k)("a",{href:i.url},i.feature)," ("+i.version+")"]);t.appendChild(a)}},addCommonSearchFeatures:function(){var e=this.model.commonSearchResults,t=this.el;function s(e){var s,i=null,a=null,n="";switch(e.type){case"JavaScript library":case"framework":a=["This "+e.type+" is not part of any web browser, so support is not listed here."];break;case"css-property":n="large",i="CSS property";break;case"dom-property":n="medium",i="DOM property or method";break;case"html-element":n="small",i="HTML element";break;case"obsolete-html-element":n="small",i="obsolete HTML elements",a=["These elements/tags are obsolete and ",Object(c.k)("span",{class:"verdict  verdict--no"},["should not be used"]),". Because of this, browser support is not tracked."];break;default:i=e.type||""}var r=e.start||"This "+i+" is";e.description?a=[]:a||(a=!1===e.supported?[r+" ",Object(c.k)("span",{class:"verdict  verdict--no"},["not supported"])," in any modern browser, nor are there any known plans to support it."]:[r+" ",Object(c.k)("span",{class:"verdict"},["supported"])," in effectively all browsers (since IE6+, Firefox 2+, Chrome 1+ etc)"]);var o=Object(c.k)("h3",{class:"feature-title"}),l=Object(c.k)("div",{class:"common-search-item__description"},a);e.description&&(l.innerHTML=Object(c.l)(e.description));var h=[o,l],d=function(e,t){t=t||"medium";var s=e.list,i=u.d.get("search").toLowerCase(),a=[];if(!s)return{elData:null,values:[]};for(var n=Object(c.k)("ul",{class:"common-search-item__list  common-search-item__list--"+t}),r=0;r<s.length;r++){var o=s[r];i.length&&0===o.toLowerCase().indexOf(i)&&(a.push(o),o=Object(c.k)("mark",null,[o])),n.appendChild(Object(c.k)("li",null,[o]))}return{elData:[Object(c.k)("p",null,["Includes the following:"]),n],values:a}}(e,n);d.elData&&(h=h.concat(d.elData)),h=h.concat(function(e){var t=e.links;if(!t||!t.length)return[];for(var s=Object(c.k)("ul",{class:"common-search-item__links"}),i=0;i<t.length;i++){var a=t[i];s.appendChild(Object(c.k)("li",null,[Object(c.k)("a",{href:a.url},[a.title])]))}return[Object(c.k)("p",null,["For more information see:"]),s]}(e)),s=1===d.values.length?e.title+": "+d.values[0]:e.title,o.innerHTML=Object(c.l)(s);var p=Object(c.k)("div",{class:"feature-block  feature-block--common-search"},h);t.appendChild(p)}for(var i=0;i<e.length;i++)s(e[i])},fetchSortedUsage:function(e){Object(c.a)("/process/get_feat_data.php?type=sorted_usage_features",{success:function(t){for(var s=JSON.parse(t),i=0;i<s.length;i++){var a=s[i],n=this.model.featuresById[a];n&&(n.supportScoreIndex=i)}this.hasSupportScoreIndexes=!0,e(s)}.bind(this),error:function(){e(null)}})},updateList:function(){var e=r.b.feature_sort.value;if(this.hasSupportScoreIndexes||"score"!==e&&"rscore"!==e){h.a.empty(this.el);var t=this.overflowViews=[];this.sortList();for(var s=this.featureViewList,i=this.el,a=0,n=0;n<s.length;n++){var o=s[n];o.model.get("isShown")?a<5?(o.render(i),a++):t.push(o):o.destroy()}this.addEcmaFeatures(),this.addCommonSearchFeatures(),t.length>0&&this.addOverflowButtons(t.length),this.summaryView&&(a>1?i.appendChild(this.summaryView.el):this.summaryView.el.parentNode&&h.a.remove(this.summaryView.el))}else this.fetchSortedUsage(function(){this.updateList()}.bind(this))},showMore:function(){this.addOverflow(5)},showAll:function(){this.addOverflow(this.overflowViews.length)},addOverflow:function(e){for(var t=this.overflowViews,s=0;t.length&&s<e;)t[0].render(this.el),t.shift(),s++;t.length>0?this.addOverflowButtons(t.length):h.a.remove(this.buttonContainer),this.summaryView&&this.summaryView.el.parentNode&&this.el.appendChild(this.summaryView.el)},addOverflowButtons:function(e){var t=this,s=Math.min(e,5);this.buttonContainer=Object(c.k)("div",{class:"overflow-button-container"}),this.showMoreButton&&this.showAllButton?(this.nextLeftElem.innerHTML=s,this.totalLeftElem.innerHTML=e):(this.nextLeftElem=Object(c.k)("span",{class:"amount-left"},s),this.totalLeftElem=Object(c.k)("span",{class:"total-left"},e),this.showMoreButton=Object(c.k)("button",{class:"ciu-button  ciu-button--invert  show-more-button"},["Show next ",this.nextLeftElem],{click:function(){t.showMore.call(t)}}),this.showAllButton=Object(c.k)("button",{class:"ciu-button  ciu-button--invert  show-all-button"},["Show all ",this.totalLeftElem],{click:function(){t.showAll.call(t)}})),this.buttonContainer.appendChild(this.showMoreButton),s==e?h.a.remove(this.showAllButton):this.buttonContainer.appendChild(this.showAllButton),this.el.appendChild(this.buttonContainer)}})),Re="tables";function Ue(e,t){if(e===Re){if(ye)return;u.d.initialDisplay(),ye=!0}else ye=!1}function Pe(e){var t=e.option,s=e.values;if(s!=r.c.NOT_APPLICABLE)switch(t){case"search":s.length&&e.changeSource==r.a.URL&&Object(r.d)(["feat","cats","statuses"]),u.d.set("search",s),s||u.d.set("searchResults",[]),n.a.publish("displayPageSection","tables");break;case"feat":s.length&&e.changeSource==r.a.URL&&Object(r.d)(["search","cats","statuses"]),u.d.set("feat",s);break;case"agents":u.d&&u.d.updateBrowsers(s);break;case"usage_threshold":u.g.set("usageThreshold",s);break;case"include_current":u.d.set(t,s);break;case"cats":case"statuses":r.b[t].matchesDefault()||Object(r.d)(["feat","search"]),u.d.set(t,s);break;case"primary_usage":u.g.set("primaryUsage",s);break;case"primary_browserset":if(u.d)if(""!==s){var i=Object(o.b)();i.fetchArray().then(function(e){u.b.readBrowserSet(i)})}else u.b.filterByBrowserSet();break;case"feature_sort":u.d.set("sortOrder",s),n.a.publish("displayPageSection","tables");break;case"custom_usage_id":break;default:return}}function He(e){"region.global"!=e.uid&&u.g.add(e)}n.a.subscribe("browserSetReady",function(e){u.b.readBrowserSet(e),r.b.primary_browserset.value===e.name&&u.b.filterByBrowserSet(e)}),n.a.subscribe("searchChanged",function(e){n.a.publish("displayPageSection","tables"),u.d.set("search",e)}),n.a.subscribe("searchResultsReceived",function(e){u.d.set("searchResults",e)}),n.a.subscribe("filterResultsReceived",function(e){u.d.set("filterResults",e)}),n.a.subscribe("listFilteredBySearch",function(e){Object(r.d)(["feat","cats","statuses"]),n.a.publish("displayPageSection","tables")}),n.a.subscribe("baseDataReady",function(e){l.a.init(),u.g.init(u.b),u.g.add(e.globalUsage),u.b.init(e.browsers,u.g),u.d.init(e,u.b),u.f.init();var t=new xe(u.f,u.b);me=new Ne(u.d,t),we=new Se,u.d.applyCurrentFilters(),n.a.subscribe("featureDataLoaded",function(e){u.d.loadFeatureData(e)}),n.a.subscribe("configChanged",Pe),n.a.subscribe("pageSectionDisplayed",Ue)}),n.a.subscribe("domReady",function(){n.a.publish("featureListReady",me),n.a.publish("optionTagsReady",we)}),n.a.subscribe("usageDataReceived",function(e){if(e.initialRequest){var t=e.usageData;He(t),e.updateOnly||r.b.primary_usage.setValue(t.uid)}}),n.a.subscribe("usageDataFound",He),n.a.subscribe("deleteUsageRequest",function(e){u.g.remove(e)}),n.a.subscribe("optionsInitialized",function(){u.b&&u.b.getMissingUsage()}),n.a.subscribe("hashProcessed",function(e){var t=e.parameters,s=!1;if(t){for(var i in t)if(t[i])switch(i){case"search":case"feat":case"cats":case"statuses":s=!0}s&&n.a.publish("displayPageSection","tables")}}),n.a.subscribe("optionsToggled",function(e,t){t||-1===location.hash.indexOf("=")&&n.a.publish("hashChangeRequest","tables")}),h.a.listen(window,"scroll",function(){n.a.publish("scroll",window.pageYOffset)}),h.a.listen(window,"keyup",function(e){27===e.keyCode&&n.a.publish("escapeKey",null)});var qe,Ge,ze,We,Je=null,Ye=null,$e=1e3,Ke=r.b.search,Ze={},Xe={};function Qe(){Je.value="",h.a.hide(Ye)}n.a.subscribe("listFilteredBySearch",function(e){var t=e.amount,s=(Je.value||Ke.value).trim(),i=t+" result"+(1===t?"":"s")+" found";0===t&&(i+='.<p>Why not <a href="https://github.com/Fyrd/caniuse/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+'+encodeURI(s)+'">suggest this feature be added?</a></p>',function(e){clearTimeout(qe),qe=setTimeout(function(){Ze[e]||("performance.now\\n"===e&&Object(c.a)("/process/search_log.php?s="+e+"&ref="+document.referrer,{success:function(){}}),ga("send","event","ciu-search-unfound",e,"Unfound Caniuse search"),Ze[e]=!0)},1e3)}(s)),Ye.innerHTML=i,h.a.show(Ye)}),n.a.subscribe("searchInputReady",function(e,t){Je=e,Ye=t;var s=function(){Ye.innerHTML="",h.a.hide(Ye)},i=Object(c.e)(function(e){!function(e){Ke.setValueFromUI(e),e.length&&window.ga&&ga("send","event","ciu-search",e,"Caniuse search")}(e)},$e);Ge=function(){var e=Je.value.trim();if(!e.length)return n.a.publish("searchChanged",e),void s();var t=null;if(Xe.hasOwnProperty(e)&&(t=Xe[e]),n.a.publish("searchChanged",e),t)n.a.publish("searchResultsReceived",t);else{var a=encodeURIComponent(e);Object(c.a)("/process/query.php?search="+a,{success:function(i){if(i){var a=JSON.parse(i);t=a?a.split(","):[],Xe[e]=t,n.a.publish("searchResultsReceived",t)}""===e&&s()}})}setTimeout(function(){n.a.publish("searchChanged",e),i(e),""===e&&s()},0)},h.a.hide(Ye),h.a.listen(Je,"focus",function(){Je.value.length>0&&n.a.publish("searchFocused")}),h.a.listen(Je,"input",Object(c.e)(Ge,500)),h.a.listen(Je,"keypress",function(e){13===e.keyCode&&Ge()}),navigator.userAgent.toLowerCase().indexOf("mobile")>-1?(Je.removeAttribute("autofocus"),Je.blur()):Je.focus(),Je.value.length&&Ge()}),n.a.subscribe("configChanged",function(e){var t;"search"===e.option?e.changeSource===r.a.URL&&"string"==typeof e.values?(t=e.values,Je.value=t.trim(),t.length?Ge():Qe()):e.values===r.c.NOT_APPLICABLE&&Qe():"cats"===e.option&&e.changeSource===r.a.UI?Qe():"feat"===e.option&&e.values.length>0&&Je.blur()});var et,tt,st,it,at=!1,nt={},rt=null;function ot(e,t){return u.a.browsers[e].dataByVersion[t].prefix}function lt(e,t){for(var s in t){var i,a=t[s],n=nt[s];if(!n)throw"No browser found for: "+s;var r=Object(u.e)(a),o=r.supportClasses.replace("x","");switch(r.supportLevel.letter){case"y":i="Yes";break;case"a":i="Partial";break;case"n":case"u":case"p":i="No";break;default:i="???"}var l=[i];if(r.isPrefixed){var h=ot(n.browser,n.version),d=Object(c.k)("span",{class:"pre"},"-"+h+"-");l.push(d)}var p=Object(c.k)("td",{class:o},l);e.appendChild(p)}}function ut(e,t){var s=t.totalAmount-e.totalAmount,i=0;if(0===s)for(var a=0;a<e.supportList.length;a++){var n=e.supportList[a],r=t.supportList[a],o=n.supportLevel.amount,l=r.supportLevel.amount-o;if(0!==l){i=l;break}}else i=s;if(0===i){var c=u.a.supportDataByFeature[e.feat],h=u.a.supportDataByFeature[t.feat];if(c&&h)i=c.baseCategories.join("")>h.baseCategories.join("")?1:-1}return i}function ct(e,t,s){if(t.length){for(var i=Object(c.k)("ul",{class:"comparison-list"}),a=Object(c.k)("div",null,[Object(c.k)("h3",{class:"compare-sub-heading"},e),i]),n=0;n<t.length;n++){var r=t[n].feat,o=u.a.supportDataByFeature[r];if(o){var l=o.title,h=Object(c.k)("li",{class:s},[Object(c.k)("a",{href:"#feat="+r,class:"comparison-feature-link"},l)]);i.appendChild(h)}else console.warn("No feat data: "+r)}st.appendChild(a),i.offsetHeight>200&&i.classList.add("useColumns")}}function ht(e){var t=0;for(var s in e.supportList=[],e.support){var i=e.support[s],a=Object(u.e)(i);e.supportList.push(a),t+=a.supportLevel.amount}e.totalAmount=t}function dt(e,t){if(t.length){for(var s=0;s<t.length;s++)ht(t[s]);t.sort(ut);var i=Object(c.k)("tbody"),a=Object(c.k)("tr",null,[Object(c.k)("th")]);!function(e){for(var t in nt){var s=nt[t],i=u.a.browsers[s.browser],a=i.dataByVersion[s.version].era,n=Object(c.f)(i.browser,s.version,a),r=Object(c.k)("th",{class:"browser  browser--"+i.id},n);e.appendChild(r)}}(a);var n=Object(c.k)("caption",null,e),r=Object(c.k)("thead",null,[a]),o=Object(c.k)("table",{class:"browser-comparison"},[n,r,i]);for(s=0;s<t.length;s++){var l=t[s],h=u.a.supportDataByFeature[l.feat];if(h){var d=h.title,p=Object(c.k)("a",{href:"#feat="+l.feat,class:"comparison-feature-link"},d),f=Object(c.k)("th",null,[p]),b=Object(c.k)("tr",null,[f]);lt(b,l.support),i.appendChild(b)}else console.warn("No feat data: "+l.feat)}st.appendChild(o)}}function pt(){var e=Object.keys(nt),t=rt?Object.keys(rt):[];if(!(e.length<=1)){var s=e.join(",");t.join(",");Object(c.a)("/process/query.php?compare="+s+"&cats="+t,{success:function(e){if(e){var t=JSON.parse(e);s=t,h.a.empty(st),ct("Supported (no prefixes needed)",s.standardSupportArr,"y"),dt("Supported (some prefix)",s.prefixedSupportArr),dt("At least partially supported",s.partialSupportArr),dt("Mixed support",s.comparisonArr),ct("No support",s.noSupportArr,"n")}var s}})}}function ft(e){rt={};for(var t=0;t<e.length;t++){var s=e[t];rt[s]=!0}pt()}function bt(e){if(!e)return null;var t=e.split("+");return{browser:t[0],version:t[1]}}function gt(e){nt={};for(var t=0;t<e.length;t++){var s=bt(e[t]);s&&(nt[e[t]]=s)}pt()}function vt(){!function(){var e=Object(c.k)("fieldset",{class:"compare-options__category"}),t=new te;t.optionId="compare_cats",t.init(ze),t.installTo(e),tt.appendChild(e);var s=Object(c.k)("legend",null,"Categories");e.insertBefore(s,e.firstChild)}(),function(e){var t=Object(c.k)("div",{class:"compare-options__browser"}),s=new ee;s.init(e),s.installTo(t),tt.appendChild(t),n.a.subscribe("configChanged",function(e){e.changeSource!==r.a.UI&&s.updateFromConfig()})}(ze.browsers)}function mt(){if(!at){var e=Object(c.k)("h3",{class:"ciu-section-heading compare-heading"},"Select browsers to compare");et=Object(c.g)(".js-section-comparison"),tt=Object(c.k)("div",{class:"settings  compare-options"}),st=Object(c.k)("div",{class:"compare-content"}),vt(),et.appendChild(tt),et.appendChild(st);var t=Object(c.g)(".browser-compare-reset",tt);h.a.prepend(tt,t),h.a.insertAfter(e,t),gt(r.b.compare.value),ft(r.b.compare_cats.value),at=!0}}var wt=new Promise(function(e){it=e});function yt(e){if(at)switch(e.option){case"compare":gt(e.values);break;case"compare_cats":ft(e.values)}}n.a.subscribe("supportDataReady",function(e){ze=e}),n.a.subscribe("featureListReady",function(e){We=e.model,it()}),n.a.subscribe("configChanged",function(e){We?yt(e):wt.then(function(){yt(e)})}),n.a.subscribe("displayPageSection",function(e){"comparison"===e?(mt(),Object(r.d)(["feat","search","cats","statuses"])):Object(r.d)(["compare","compare_cats"])}),n.a.subscribe("hashProcessed",function(e){e.parameters&&(e.parameters.compare||e.parameters.compare_cats)&&(mt(),n.a.publish("displayPageSection","comparison"))}),function(e){var t="stats_import",i="ga_data",a=null,r=!1;function o(){if(!r){a=Object(c.g)(".js-section-"+t),Object(c.a)("/tpl/ga-import-html.tpl.php",{success:function(e){a.innerHTML=e,h.a.listen(Object(c.g)(".js-close-import"),"click",l);var t=Object(c.k)("div",{id:"import_message"});a.appendChild(t),s.e(5).then(s.bind(null,20)).then(function(e){e.default.init();var t=document.createElement("script");t.src="https://apis.google.com/js/client.js?onload=handleClientLoad",document.head.appendChild(t)})}});Object(c.n)(i);r=!0}}function l(){Object(c.g)(".js-section-tables").style.display="block",Object(c.g)(".js-section-stats_import").style.display="none"}n.a.subscribe("pageSectionDisplayed",function(e){e===t&&o()}),n.a.subscribe("analyticsImportRequest",function(){Object(c.g)(".js-section-tables").style.display="none",Object(c.g)(".js-section-stats_import").style.display="block",window.scroll(0,0),o()})}(Caniuse),function(e){var t="browserset_select",i=null,a=!1;function r(e){i=Object(c.g)(".js-section-"+t),a&&h.a.empty(i),Object(c.a)("/tpl/browserset-select.tpl.php",{success:function(t){i.innerHTML=t,e&&(Object(c.g)(".js-prefix").textContent="Edit"),h.a.listen(Object(c.g)(".js-close"),"click",o),s.e(0).then(s.bind(null,21)).then(function(t){var s=t.default;s.init(e),s.on("close",function(){o()})})}}),a=!0}function o(){Object(c.g)(".js-section-tables").style.display="block",Object(c.g)(".js-section-browserset_select").style.display="none",window.scroll(0,0)}function l(e){Object(c.g)(".js-section-tables").style.display="none",Object(c.g)(".js-section-browserset_select").style.display="block",window.scroll(0,0),r(e)}n.a.subscribe("pageSectionDisplayed",function(e){e===t&&r()}),n.a.subscribe("browsersetAddRequest",l),n.a.subscribe("browsersetEditRequest",l)}(Caniuse),u.c.init(),L.init()}]);
//# sourceMappingURL=bundle.js.map