<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>

    //1.使用场景:使用Promise我们可以用同步的方式写异步代码
    //2.三种状态:promise的3种状态
    // 上面提到了promise的 resolved 状态，那么，我们就来说一下promise的3种状态，未完成（unfulfilled）、完成（fulfilled）、失败（failed）。
    // 在promise中我们使用resolved代表fulfilled，使用rejected表示fail。

    //3. Es6中规定:Promise对象是一个构造函数，用来生成Promise实例。
    /* const promise = new Promise(function (resolve, reject) {
      // ... some code

      if ('异步操作成功' ) {
        resolve(value);
      } else {
        reject(error);
      }
    }); */

    // Promise构造函数接受一个函数作为参数，该函数的两个参数分别是resolve和reject。它们是两个函数，由 JavaScript 引擎提供，不用自己部署。

    // resolve函数的作用是，将Promise对象的状态从“未完成”变为“成功”（即从 pending 变为 resolved），在异步操作成功时调用，并将异步操作的结果，作为参数传递出去；reject函数的作用是，将Promise对象的状态从“未完成”变为“失败”（即从 pending 变为 rejected），在异步操作失败时调用，并将异步操作报出的错误，作为参数传递出去。
    // Promise 新建后就会立即执行。
    let promise = new Promise(function (resolve, reject) {
      console.log('Promise');
      resolve();
    });

    promise.then(function () {
      console.log('resolved.');
    });

    console.log('Hi!');

    // 上面代码中，Promise 新建后立即执行，所以首先输出的是Promise。然后，then方法指定的回调函数，将在当前脚本所有同步任务执行完才会执行，所以resolved最后输出。
  </script>
</body>

</html>