<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <script>
        // 知识点：
        // ==  相等，比较的值
        // === 全等，比较类型还比较值

        // 相等比较规则：（一条条从上到下的去匹配规则，匹配到那一条应用那一条规则）
        // 1. NaN 与任何值不相等，包括NaN自己本身
        // 2. null 与任何值不相等，除了null和undefined
        // 3. undefined 与任何值不相等，除了null和undefined
        // 4. 如果操作数有布尔类型或者是数字，把操作数都转成数值进行比较
        // 5. 如果操作数有一个是字符串，把操作数都转成字符串进行比较
        // 6. 如果操作数两边都是复杂数据类型，比较的是地址

        // 问：请判断下面比较的结果结果

        console.log([] == ![]);
        console.log({} == !{});





        //  答： console.log([] == ![]);  // true
        //  思路1：
        /*  先取反优先：取反是将[]转为了布尔类型，且值取反了。 => [] == false
            都转为数字再比较。=> 0==0
            结果true。
         */

        //  思路2(底层实现原理)：
        /*  先取反优先 =>  [] == false
            如果任一值是布尔值，则先调用Number()函数 => [] == 0
            如果一个是对象，另一个是数值或字符串，把对象转换成基础类型的值再比较:
            [].valueOf() ==> []
            [].toString()  ==> ""
            "" == 0
            此时符合第2条 Number("") = 0  
            0 == 0
            */



        console.log({} == !{});  //false

        // 思路1：
        /* 先取反优先：{} == false
           都转为数字再比较。此时就是：NaN === 0
           结果false。
         */

        // 思路2(底层实现原理):
        /*  先取反优先：{} == false
             将布尔类型转数值进行比较  ==> {} == 0
             将对象转为基本类型：
             {}.valueOf()  ==> {}
             {}.toString() ==> "[object Object]"
             此时比较： "[object Object]" == 0
             转数值比较：NaN == 0
             结果为false */




        // 小拓展：
        // 1.  valueOf()  toString() 
        // 对象参与运算和比较的时候， js会自动让对象去调用这两个方法
        // 默认先valueOf(), 如果没有得到简单数据类型，在toString()

        // 2. 相等运算符的运算规则如下：
        // 如果两个值类型不同，根据下面规则进行类型转换再比较： 
        // （1）如果一个是null、一个是undefined，那么[相等]。 
        // （2）如果任一值是字符串，另一个值是数值，先将字符串转换为数值；即是调用Number()函数。 
        // （3）如果任一值时布尔值，则先将其转换为数值，即是调用Number()函数。
        // （4）如果一个是对象，另一个是数值或字符串，把对象转换成基础类型的值再比较。
                //对象转换成基础类型，利用它的toString或者valueOf方法。 
                //js核心内置类，会尝试valueOf先于toString；


    </script>
</body>

</html>